"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js");Math||(i+t)();const t=()=>"../../components/tabbar.js",i=()=>"../../components/EnhancedPoster.js",s={__name:"HomePage",setup(t){const i=e.ref(""),s=e.ref(!1),o=e.ref(!0),r=e.ref([]),l=e.ref([]),n=e.ref([]),u=e.ref(0),c=e.ref([{imageUrl:"/static/banner/toucan-banner.jpg",title:"发现自然之美",subtitle:"记录每一次与鸟类的美妙邂逅"},{imageUrl:"/static/banner/eagle-banner.jpg",title:"翱翔天际",subtitle:"见证猛禽的威武与优雅"},{imageUrl:"/static/banner/peacock-banner.jpg",title:"绚烂羽翼",subtitle:"感受大自然的色彩魅力"},{imageUrl:"/static/banner/hummingbird-banner.jpg",title:"精灵悬停",subtitle:"捕捉蜂鸟的瞬间之美"}]),v=[{id:1,imageUrl:"/static/posts/bird1.jpg",imageHeight:200,description:"今天在公园拍到的小鸟，真的太可爱了！",views:1223,likes:12,author:{name:"鸟类爱好者",avatar:"/static/avatars/user1.png"},location:"北京·朝阳公园",publishTime:"2小时前"},{id:2,imageUrl:"/static/posts/bird2.jpg",imageHeight:280,description:"清晨6点，记录到了珍贵的候鸟迁徙场景",views:25678,likes:1892,author:{name:"自然摄影师",avatar:"/static/avatars/user2.png"},location:"上海·世纪公园",publishTime:"5小时前"},{id:3,imageUrl:"/static/posts/bird3.jpg",imageHeight:220,description:"蜂鸟悬停采蜜的瞬间，大自然的精灵",views:5432,likes:234,author:{name:"野生动物保护者",avatar:"/static/avatars/user3.png"},location:"云南·西双版纳",publishTime:"1天前"},{id:4,imageUrl:"/static/posts/bird4.jpg",imageHeight:300,description:"金刚鹦鹉的绚烂色彩，热带雨林的瑰宝",views:8765,likes:456,author:{name:"生态研究员",avatar:"/static/avatars/user4.jpg"},location:"海南·亚龙湾",publishTime:"2天前"}],d=e=>{u.value=e.detail.current,console.log("当前Banner索引:",u.value)},m=()=>{console.log("搜索内容:",i.value),i.value.trim()?j(i.value):w()},p=()=>{s.value=!0},g=()=>{s.value=!1},b=()=>{i.value.trim()&&(j(i.value),e.index.vibrateShort())},h=()=>{console.log("Banner加载完成")},f=a=>{const t=r.value.find((e=>e.id===a.id));t&&(t.likes+=1,T(),e.index.showToast({title:"点赞成功",icon:"success",duration:1e3}))},_=a=>{const t=r.value.find((e=>e.id===a.id));t&&(t.views+=1),e.index.navigateTo({url:`/pages/PosterDetail/PosterDetail?id=${a.id}`})},j=async a=>{try{o.value=!0,await new Promise((e=>setTimeout(e,500)));const e=v.filter((e=>e.description.includes(a)||e.location.includes(a)));r.value=e,T()}catch(t){console.error("搜索失败:",t),e.index.showToast({title:"搜索失败，请重试",icon:"error"})}finally{o.value=!1}},w=()=>{r.value=[...v],T()},T=()=>{l.value=[],n.value=[];let e=0,a=0;r.value.forEach((t=>{const i=t.imageHeight+120;e<=a?(l.value.push(t),e+=i):(n.value.push(t),a+=i)}))};return e.onMounted((async()=>{try{await new Promise((e=>setTimeout(e,800))),r.value=[...v],T()}catch(a){console.error("页面初始化失败:",a),e.index.showToast({title:"加载失败，请重试",icon:"error"})}finally{o.value=!1}})),(t,u)=>e.e({a:e.f(c.value,((a,t,i)=>({a:a.imageUrl,b:e.o(h,t),c:e.t(a.title),d:e.t(a.subtitle),e:t}))),b:e.o(d),c:a._imports_1,d:e.o([e=>i.value=e.detail.value,m]),e:e.o(p),f:e.o(g),g:i.value,h:a._imports_1$1,i:e.o(b),j:s.value?1:"",k:a._imports_2,l:a._imports_3,m:a._imports_4,n:a._imports_5,o:o.value},o.value?{}:{p:e.f(l.value,((a,t,i)=>({a:e.o(f,a.id),b:e.o(_,a.id),c:"cf7f5387-0-"+i,d:e.p({"poster-data":a}),e:a.id,f:.1*t+"s"}))),q:e.f(n.value,((a,t,i)=>({a:e.o(f,a.id),b:e.o(_,a.id),c:"cf7f5387-1-"+i,d:e.p({"poster-data":a}),e:a.id,f:.1*(t+1)+"s"})))},{r:!o.value&&0===r.value.length},o.value||0!==r.value.length?{}:{s:a._imports_6})}},o=e._export_sfc(s,[["__scopeId","data-v-cf7f5387"]]);wx.createPage(o);
