"use strict";const e=require("../../common/vendor.js");Math||s();const s=()=>"../../components/tabbar.js",i={__name:"UploadPage",setup(s){const i=e.ref(""),o="https://birdfront-oss.oss-cn-shanghai.aliyuncs.com",a=(e,s="icon")=>{if(!e)return"";const i=e.startsWith("/")?e.slice(1):e;let a="";switch(s){case"icon":default:a="?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90";break;case"small-icon":a="?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90";break;case"tiny-icon":a="?x-oss-process=image/resize,m_lfit,w_16,h_16/quality,q_90";break;case"avatar":a="?x-oss-process=image/resize,m_lfit,w_80,h_80/quality,q_90";break;case"large":a="?x-oss-process=image/resize,m_lfit,w_120,h_120/quality,q_90";break;case"medium":a="?x-oss-process=image/resize,m_lfit,w_200,h_200/quality,q_85";break;case"banner":a="?x-oss-process=image/resize,m_lfit,w_750,h_400/quality,q_85";break;case"post":a="?x-oss-process=image/resize,m_lfit,w_400,h_600/quality,q_85";break;case"post-thumb":a="?x-oss-process=image/resize,m_lfit,w_300,h_450/quality,q_80";break;case"upload-bg":a="?x-oss-process=image/resize,m_lfit,w_300,h_60/quality,q_85";break;case"upload-text":a="?x-oss-process=image/resize,m_lfit,w_150,h_30/quality,q_90"}return`${o}/${i}${a}`},t=()=>{e.index.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:s=>{i.value=s.tempFilePaths[0],e.index.showToast({title:"图片上传成功",icon:"success",duration:1500})},fail:s=>{console.error("图片选择失败:",s),e.index.showToast({title:"图片选择失败",icon:"error",duration:2e3})}})},c=()=>{e.index.showModal({title:"确认重新上传",content:"确定要重新选择图片吗？",success:s=>{s.confirm&&(i.value="",e.index.showToast({title:"已重置",icon:"success",duration:1e3}))}})},n=()=>{i.value?(e.index.showLoading({title:"正在分析图片..."}),console.log("Analyzing image:",i.value),setTimeout((()=>{e.index.hideLoading(),e.index.navigateTo({url:`/pages/AnalysisResult/AnalysisResult?imageUrl=${encodeURIComponent(i.value)}`})}),2e3)):e.index.showToast({title:"请先上传图片",icon:"none",duration:2e3})},l=e=>{console.warn("图标加载失败:",e)},r=e=>{console.warn("图片加载失败:",e)};return(s,o)=>e.e({a:i.value},i.value?{b:i.value,c:e.o(r)}:{},{d:a("static/icons/ellipse-48.png","tiny-icon"),e:e.o(l),f:a("static/icons/route-105.png","small-icon"),g:e.o(l),h:a("static/icons/route-106.png","icon"),i:e.o(l),j:a("static/icons/icon_interfaces_mail.png","icon"),k:e.o(l),l:i.value},i.value?{m:e.o(c),n:e.o(n)}:{o:a("static/icons/圆形 4.png","icon"),p:e.o(t),q:e.o(l),r:a("static/icons/矩形 1.png","upload-bg"),s:e.o(t),t:e.o(l),v:a("static/icons/箭头 1.png","small-icon"),w:e.o(t),x:e.o(l),y:a("static/icons/点击上传图片.png","upload-text"),z:e.o(t),A:e.o(l)})}};wx.createPage(i);
