"use strict";const e=require("../common/vendor.js"),a={__name:"tabbar",setup(a){const t=e.ref("/pages/HomePage/HomePage"),o="https://birdfront-oss.oss-cn-shanghai.aliyuncs.com",s=[{pagePath:"/pages/HomePage/HomePage",text:"首页",iconPath:"static/icons/home.png",selectedIconPath:"static/icons/home-active.png"},{pagePath:"/pages/MapPage/MapPage",text:"地图",iconPath:"static/icons/map.png",selectedIconPath:"static/icons/map-active.png"},{pagePath:"/pages/UploadPage/UploadPage",text:"上传",iconPath:"static/icons/upload.png",selectedIconPath:"static/icons/upload-active.png"},{pagePath:"/pages/ProfilePage/ProfilePage",text:"我的",iconPath:"static/icons/profile.png",selectedIconPath:"static/icons/profile-active.png"}],c=(e,a)=>((e,a="icon")=>{if(!e)return"";const t=e.startsWith("/")?e.slice(1):e;let s="";switch(a){case"icon":default:s="?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90";break;case"small-icon":s="?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90"}return`${o}/${t}${s}`})(a?e.selectedIconPath:e.iconPath,"icon"),n=e=>{console.warn("标签栏图标加载失败:",e)};return e.onMounted((()=>{(()=>{try{const e=getCurrentPages();if(e&&e.length>0){const a=e[e.length-1].route,o=s.find((e=>{const t=e.pagePath.replace(/^\//,"");return a===t}));o&&(t.value=o.pagePath)}}catch(e){console.warn("获取当前页面路径失败:",e),t.value="/pages/HomePage/HomePage"}})(),console.log("TabBar组件已挂载，当前路径:",t.value)})),(a,o)=>({a:e.f(s,((a,o,s)=>({a:c(a,t.value===a.pagePath),b:e.o(n,o),c:e.t(a.text),d:o,e:t.value===a.pagePath?1:"",f:e.o((o=>(a=>{t.value=a;try{e.index.vibrateShort({type:"light"})}catch(o){console.warn("触觉反馈不支持:",o)}e.index.switchTab({url:a,success:()=>{console.log("切换到:",a)},fail:t=>{console.error("页面跳转失败:",t),e.index.navigateTo({url:a,fail:a=>{console.error("导航失败:",a),e.index.showToast({title:"页面跳转失败",icon:"none"})}})}})})(a.pagePath)),o)})))})}},t=e._export_sfc(a,[["__scopeId","data-v-81907763"]]);wx.createComponent(t);
