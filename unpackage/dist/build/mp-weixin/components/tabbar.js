"use strict";const e=require("../common/vendor.js"),a={__name:"tabbar",setup(a){const o=e.ref("/pages/HomePage/HomePage"),t="https://birdfront-oss.oss-cn-shanghai.aliyuncs.com",c=e.reactive([{pagePath:"/pages/HomePage/HomePage",text:"首页",iconPath:"static/icons/home.png",selectedIconPath:"static/icons/home-active.png",fallbackIcon:"🏠",iconError:!1},{pagePath:"/pages/MapPage/MapPage",text:"地图",iconPath:"static/icons/map.png",selectedIconPath:"static/icons/map-active.png",fallbackIcon:"🗺️",iconError:!1},{pagePath:"/pages/UploadPage/UploadPage",text:"上传",iconPath:"static/icons/upload.png",selectedIconPath:"static/icons/upload-active.png",fallbackIcon:"📤",iconError:!1},{pagePath:"/pages/ProfilePage/ProfilePage",text:"我的",iconPath:"static/icons/profile.png",selectedIconPath:"static/icons/profile-active.png",fallbackIcon:"👤",iconError:!1}]),n=(e,a)=>((e,a="icon")=>{if(!e)return"";const o=e.startsWith("/")?e.slice(1):e;let c="";switch(a){case"icon":default:c="?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90";break;case"small-icon":c="?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90"}return`${t}/${o}${c}`})(a?e.selectedIconPath:e.iconPath,"small-icon");return e.onMounted((()=>{(()=>{try{const e=getCurrentPages();if(e&&e.length>0){const a=e[e.length-1].route,t=c.find((e=>{const o=e.pagePath.replace(/^\//,"");return a===o}));t&&(o.value=t.pagePath)}}catch(e){console.warn("获取当前页面路径失败:",e),o.value="/pages/HomePage/HomePage"}})(),console.log("TabBar组件已挂载，当前路径:",o.value)})),(a,t)=>({a:e.f(c,((a,t,c)=>e.e({a:!a.iconError},a.iconError?{e:e.t(a.fallbackIcon),f:o.value===a.pagePath?1:""}:{b:n(a,o.value===a.pagePath),c:e.o((e=>(e=>{console.warn("标签栏图标加载失败:",e.text),e.iconError=!0})(a)),t),d:e.o((e=>(e=>{console.log("标签栏图标加载成功:",e.text),e.iconError=!1})(a)),t)},{g:e.t(a.text),h:t,i:o.value===a.pagePath?1:"",j:e.o((t=>(a=>{o.value=a;try{e.index.vibrateShort({type:"light"})}catch(t){console.warn("触觉反馈不支持:",t)}e.index.switchTab({url:a,success:()=>{console.log("切换到:",a)},fail:o=>{console.error("页面跳转失败:",o),e.index.navigateTo({url:a,fail:a=>{console.error("导航失败:",a),e.index.showToast({title:"页面跳转失败",icon:"none"})}})}})})(a.pagePath)),t)})))})}},o=e._export_sfc(a,[["__scopeId","data-v-53cc0b36"]]);wx.createComponent(o);
