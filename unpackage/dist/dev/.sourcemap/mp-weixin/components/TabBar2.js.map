{"version":3,"file":"TabBar2.js","sources":["components/TabBar.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovc2l0cOmhueebri9taW5pcHJvZ3JhbS9iaXJkLWZyb250ZW5kL2NvbXBvbmVudHMvVGFiQmFyLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"tab-bar\">\n    <view \n      v-for=\"(item, index) in tabList\" \n      :key=\"index\"\n      class=\"tab-item\"\n      :class=\"{ active: currentPath === item.pagePath }\"\n      @click=\"switchTab(item.pagePath)\"\n    >\n      <!-- ‰ΩøÁî®Â≠ó‰ΩìÂõæÊ†á‰Ωú‰∏∫ÂêéÂ§áÊñπÊ°à -->\n      <view class=\"tab-icon-container\">\n        <image \n          v-if=\"!item.iconError\"\n          :src=\"getTabIconUrl(item, currentPath === item.pagePath)\" \n          class=\"tab-icon\"\n          @error=\"onIconError(item)\"\n          @load=\"onIconLoad(item)\"\n        />\n        <!-- ÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•Êó∂ÊòæÁ§∫ÁöÑÂêéÂ§áÂ≠ó‰ΩìÂõæÊ†á -->\n        <text \n          v-else\n          class=\"tab-icon-fallback\"\n          :class=\"{ active: currentPath === item.pagePath }\"\n        >\n          {{ item.fallbackIcon }}\n        </text>\n      </view>\n      <text class=\"tab-text\">{{ item.text }}</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, reactive } from 'vue';\n\n// ========== ÂìçÂ∫îÂºèÊï∞ÊçÆ ==========\nconst currentPath = ref('/pages/HomePage/HomePage');\n\n// OSSÈÖçÁΩÆ\nconst ossConfig = {\n  baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com'\n};\n\n// ========== OSSÂ∑•ÂÖ∑ÊñπÊ≥ï ==========\n/**\n * Ëé∑ÂèñOSSÂõæÁâáURL\n * @param {string} filename - Êñá‰ª∂Âêç\n * @param {string} size - Â∞∫ÂØ∏Á±ªÂûã\n * @returns {string} ÂÆåÊï¥ÁöÑOSS URL\n */\nconst getOSSUrl = (filename, size = 'icon') => {\n  if (!filename) return '';\n  \n  // Á°Æ‰øùÊñá‰ª∂Âêç‰∏ç‰ª•ÊñúÊù†ÂºÄÂ§¥\n  const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename;\n  \n  // Ê†πÊçÆÂ∞∫ÂØ∏Á±ªÂûãËÆæÁΩÆ‰∏çÂêåÁöÑÂ§ÑÁêÜÂèÇÊï∞\n  let params = '';\n  switch(size) {\n    case 'icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n      break;\n    case 'small-icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90';\n      break;\n    default:\n      params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n  }\n  \n  return `${ossConfig.baseUrl}/${cleanFilename}${params}`;\n};\n\n// ========== Ê†áÁ≠æÈÖçÁΩÆ ==========\nconst tabList = reactive([\n  {\n    pagePath: '/pages/HomePage/HomePage',\n    text: 'È¶ñÈ°µ',\n    iconPath: 'static/icons/home.png',\n    selectedIconPath: 'static/icons/home-active.png',\n    fallbackIcon: 'üè†', // ÂêéÂ§áÂ≠ó‰ΩìÂõæÊ†á\n    iconError: false // ÂõæÊ†áÊòØÂê¶Âä†ËΩΩÂ§±Ë¥•\n  },\n  {\n    pagePath: '/pages/MapPage/MapPage',\n    text: 'Âú∞Âõæ',\n    iconPath: 'static/icons/map.png',\n    selectedIconPath: 'static/icons/map-active.png',\n    fallbackIcon: 'üó∫Ô∏è',\n    iconError: false\n  },\n  {\n    pagePath: '/pages/UploadPage/UploadPage',\n    text: '‰∏ä‰º†',\n    iconPath: 'static/icons/upload.png',\n    selectedIconPath: 'static/icons/upload-active.png',\n    fallbackIcon: 'üì§',\n    iconError: false\n  },\n  {\n    pagePath: '/pages/ProfilePage/ProfilePage',\n    text: 'ÊàëÁöÑ',\n    iconPath: 'static/icons/profile.png',\n    selectedIconPath: 'static/icons/profile-active.png',\n    fallbackIcon: 'üë§',\n    iconError: false\n  }\n]);\n\n// ========== ËÆ°ÁÆóÂ±ûÊÄßÂíåÊñπÊ≥ï ==========\n\n/**\n * Ëé∑ÂèñÊ†áÁ≠æÂõæÊ†áÁöÑURLÔºå‰ºòÂÖà‰ΩøÁî®Êú¨Âú∞Ë∑ØÂæÑ‰Ωú‰∏∫ÂêéÂ§á\n * @param {Object} item - Ê†áÁ≠æÈ°πÂØπË±°\n * @param {Boolean} isActive - ÊòØÂê¶‰∏∫ÊøÄÊ¥ªÁä∂ÊÄÅ\n * @returns {string} ÂõæÊ†áÁöÑURL\n */\nconst getTabIconUrl = (item, isActive) => {\n  const iconPath = isActive ? item.selectedIconPath : item.iconPath;\n  \n  // ‰ºòÂÖàÂ∞ùËØïÊú¨Âú∞Ë∑ØÂæÑ\n  // const localPath = `/${iconPath}`;\n  \n  // Â¶ÇÊûúÈúÄË¶Å‰ΩøÁî®OSSÔºåÂèØ‰ª•ÂèñÊ∂à‰∏ãÈù¢ÁöÑÊ≥®Èáä\n  return getOSSUrl(iconPath, 'icon');\n  \n  // return localPath;\n};\n\n// ========== ‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞ ==========\n\n/**\n * ÂàáÊç¢Ê†áÁ≠æÈ°µ\n * @param {string} path - È°µÈù¢Ë∑ØÂæÑ\n */\nconst switchTab = (path) => {\n  currentPath.value = path;\n  \n  // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n  try {\n    uni.vibrateShort({\n      type: 'light'\n    });\n  } catch (error) {\n    console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n  }\n  \n  // Ë∑≥ËΩ¨È°µÈù¢\n  uni.switchTab({\n    url: path,\n    success: () => {\n      console.log('ÂàáÊç¢Âà∞:', path);\n    },\n    fail: (error) => {\n      console.error('È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•:', error);\n      // ÂèØ‰ª•Â∞ùËØï‰ΩøÁî® navigateTo ‰Ωú‰∏∫ÈôçÁ∫ßÊñπÊ°à\n      uni.navigateTo({\n        url: path,\n        fail: (navError) => {\n          console.error('ÂØºËà™Â§±Ë¥•:', navError);\n          uni.showToast({\n            title: 'È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•',\n            icon: 'none'\n          });\n        }\n      });\n    }\n  });\n};\n\n/**\n * ÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\n * @param {Object} item - Ê†áÁ≠æÈ°πÂØπË±°\n */\nconst onIconError = (item) => {\n  console.warn('Ê†áÁ≠æÊ†èÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•:', item.text);\n  item.iconError = true; // ËÆæÁΩÆÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•Ê†áÂøó\n};\n\n/**\n * ÂõæÊ†áÂä†ËΩΩÊàêÂäüÂ§ÑÁêÜ\n * @param {Object} item - Ê†áÁ≠æÈ°πÂØπË±°\n */\nconst onIconLoad = (item) => {\n  console.log('Ê†áÁ≠æÊ†èÂõæÊ†áÂä†ËΩΩÊàêÂäü:', item.text);\n  item.iconError = false; // ÈáçÁΩÆÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•Ê†áÂøó\n};\n\n/**\n * ÂàùÂßãÂåñÂΩìÂâçÈ°µÈù¢Ë∑ØÂæÑ\n * ÂèØ‰ª•ÈÄöËøáuni.getCurrentPages()Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Ë∑ØÂæÑ\n */\nconst initCurrentPath = () => {\n  try {\n    // Âú®uni-app‰∏≠Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Ê†à\n    const pages = getCurrentPages();\n    if (pages && pages.length > 0) {\n      const currentPage = pages[pages.length - 1];\n      const route = currentPage.route;\n      \n      // Ê†πÊçÆË∑ØÁî±ÂåπÈÖçÊ†áÁ≠æ\n      const matchedTab = tabList.find(tab => {\n        const tabRoute = tab.pagePath.replace(/^\\//, '');\n        return route === tabRoute;\n      });\n      \n      if (matchedTab) {\n        currentPath.value = matchedTab.pagePath;\n      }\n    }\n  } catch (error) {\n    console.warn('Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Ë∑ØÂæÑÂ§±Ë¥•:', error);\n    // ËÆæÁΩÆÈªòËÆ§Ë∑ØÂæÑ\n    currentPath.value = '/pages/HomePage/HomePage';\n  }\n};\n\n// ========== ÁîüÂëΩÂë®Êúü ==========\nonMounted(() => {\n  initCurrentPath();\n  \n  // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†È°µÈù¢ÂèòÂåñÁõëÂê¨ÔºàÂ¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºâ\n  console.log('TabBarÁªÑ‰ª∂Â∑≤ÊåÇËΩΩÔºåÂΩìÂâçË∑ØÂæÑ:', currentPath.value);\n});\n</script>\n\n<style scoped>\n.tab-bar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100rpx; /* ‰ΩøÁî®rpxÂçï‰Ωç */\n  display: flex;\n  background-color: #ffffff;\n  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.1);\n  border-top: 1rpx solid rgba(0, 0, 0, 0.05);\n  z-index: 1000;\n  transition: all 0.3s ease;\n}\n\n.tab-item {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8rpx 0;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  cursor: pointer;\n}\n\n.tab-item:active {\n  transform: scale(0.95);\n  background-color: rgba(46, 163, 183, 0.05);\n}\n\n.tab-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 4rpx;\n  background: #2EA3B7;\n  border-radius: 2rpx;\n  transition: width 0.3s ease;\n}\n\n.tab-item.active::before {\n  width: 40rpx;\n}\n\n.tab-icon-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48rpx;\n  height: 48rpx;\n  margin-bottom: 4rpx;\n}\n\n.tab-icon {\n  width: 48rpx;\n  height: 48rpx;\n  transition: all 0.3s ease;\n  opacity: 0.7;\n}\n\n.tab-item.active .tab-icon {\n  opacity: 1;\n  transform: scale(1.1);\n}\n\n/* ÂêéÂ§áÂ≠ó‰ΩìÂõæÊ†áÊ†∑Âºè */\n.tab-icon-fallback {\n  font-size: 40rpx;\n  line-height: 48rpx;\n  transition: all 0.3s ease;\n  opacity: 0.7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.tab-icon-fallback.active {\n  opacity: 1;\n  transform: scale(1.1);\n}\n\n.tab-text {\n  font-size: 20rpx;\n  color: #666;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  line-height: 1.2;\n  text-align: center;\n}\n\n.tab-item.active .tab-text {\n  color: #2EA3B7;\n  font-weight: 600;\n  transform: scale(1.05);\n}\n\n/* ÊÇ¨ÂÅúÊïàÊûúÔºà‰∏ªË¶ÅÈíàÂØπH5Á´ØÔºâ */\n@media (hover: hover) {\n  .tab-item:hover {\n    background-color: rgba(46, 163, 183, 0.03);\n  }\n  \n  .tab-item:hover .tab-icon,\n  .tab-item:hover .tab-icon-fallback {\n    opacity: 0.9;\n    transform: translateY(-2rpx);\n  }\n  \n  .tab-item:hover .tab-text {\n    color: #2EA3B7;\n  }\n}\n\n/* ÂìçÂ∫îÂºèÈÄÇÈÖç */\n@media screen and (max-width: 750rpx) {\n  .tab-bar {\n    height: 96rpx;\n  }\n  \n  .tab-icon-container {\n    width: 44rpx;\n    height: 44rpx;\n  }\n  \n  .tab-icon {\n    width: 44rpx;\n    height: 44rpx;\n  }\n  \n  .tab-icon-fallback {\n    font-size: 36rpx;\n    line-height: 44rpx;\n  }\n  \n  .tab-text {\n    font-size: 18rpx;\n  }\n}\n\n/* ÈÄÇÈÖçiphoneXÁ≠âÂ∏¶ÊúâÂÆâÂÖ®Âå∫ÂüüÁöÑËÆæÂ§á */\n@supports (bottom: env(safe-area-inset-bottom)) {\n  .tab-bar {\n    padding-bottom: env(safe-area-inset-bottom);\n    height: calc(100rpx + env(safe-area-inset-bottom));\n  }\n}\n\n/* ÊöóËâ≤Ê®°ÂºèÈÄÇÈÖç */\n@media (prefers-color-scheme: dark) {\n  .tab-bar {\n    background-color: #1a1a1a;\n    border-top-color: rgba(255, 255, 255, 0.1);\n  }\n  \n  .tab-text {\n    color: #999;\n  }\n  \n  .tab-item.active .tab-text {\n    color: #4dd0e1;\n  }\n  \n  .tab-item::before {\n    background: #4dd0e1;\n  }\n}\n\n/* ‰ºòÂåñÂä®ÁîªÊÄßËÉΩ */\n.tab-item,\n.tab-icon,\n.tab-icon-fallback,\n.tab-text {\n  will-change: transform, opacity;\n}\n\n/* Èò≤Ê≠¢ÊñáÊú¨ÈÄâ‰∏≠ */\n.tab-text {\n  user-select: none;\n  -webkit-user-select: none;\n}\n</style>","import Component from 'D:/sitpÈ°πÁõÆ/miniprogram/bird-frontend/components/TabBar.vue'\nwx.createComponent(Component)"],"names":["ref","reactive","uni","onMounted"],"mappings":"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"}