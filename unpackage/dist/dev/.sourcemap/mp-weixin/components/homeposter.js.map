{"version":3,"file":"homeposter.js","sources":["components/homeposter.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovc2l0cOmhueebri9taW5pcHJvZ3JhbS9iaXJkLWZyb250ZW5kL2NvbXBvbmVudHMvaG9tZXBvc3Rlci52dWU"],"sourcesContent":["<template>\n  <view class=\"poster-item\" @click=\"handleItemClick\">\n    <!-- ‰ΩøÁî®OSS URLÊòæÁ§∫ÂõæÁâá -->\n    <image \n      :src=\"imageUrl\" \n      :style=\"{ height: posterData.imageHeight + 'px' }\"\n      class=\"poster-image\"\n      mode=\"aspectFill\"\n      @error=\"handleImageError\"\n      @load=\"handleImageLoad\"\n    />\n    \n    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n    <view v-if=\"imageLoading\" class=\"image-loading\">\n      <view class=\"loading-spinner\"></view>\n    </view>\n    \n    <!-- ÂõæÁâá‰ø°ÊÅØË¶ÜÁõñÂ±Ç -->\n    <view class=\"poster-info\">\n      <view class=\"poster-description\">\n        {{ posterData.description }}\n      </view>\n      \n      <!-- ÁªüËÆ°‰ø°ÊÅØ -->\n      <view class=\"poster-stats\">\n        <view class=\"stat-item\" v-if=\"posterData.views\">\n          <text class=\"stat-icon\">üëÅ</text>\n          <text class=\"stat-text\">{{ formatNumber(posterData.views) }}</text>\n        </view>\n        \n        <view class=\"stat-item\" v-if=\"posterData.likes\">\n          <text class=\"stat-icon\">‚ù§Ô∏è</text>\n          <text class=\"stat-text\">{{ formatNumber(posterData.likes) }}</text>\n        </view>\n        \n        <!-- ËØÜÂà´ËÆ∞ÂΩïÁâπÊúâÁöÑÂáÜÁ°ÆÁéá -->\n        <view class=\"stat-item\" v-if=\"posterData.accuracy\">\n          <text class=\"accuracy-text\">{{ posterData.accuracy }}</text>\n        </view>\n        \n        <!-- ËØÜÂà´ËÆ∞ÂΩïÁâπÊúâÁöÑÊó•Êúü -->\n        <view class=\"stat-item\" v-if=\"posterData.date\">\n          <text class=\"date-text\">{{ posterData.date }}</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  name: 'HomePoster',\n  \n  props: {\n    posterData: {\n      type: Object,\n      required: true,\n      default: () => ({\n        id: '',\n        imageUrl: '',\n        imageHeight: 200,\n        description: '',\n        views: 0,\n        likes: 0,\n        accuracy: '',\n        date: ''\n      })\n    }\n  },\n  \n  data() {\n    return {\n      imageLoading: true,\n      imageError: false,\n      // OSSÈÖçÁΩÆ\n      ossConfig: {\n        baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com',\n      }\n    }\n  },\n  \n  computed: {\n    /**\n     * ËÆ°ÁÆóÂõæÁâáÁöÑOSS URL\n     */\n    imageUrl() {\n      return this.getOSSUrl(this.posterData.imageUrl || this.posterData.src, 'medium')\n    }\n  },\n  \n  methods: {\n    /**\n     * Ëé∑ÂèñOSSÂõæÁâáURL\n     * @param {string} filename - Êñá‰ª∂Âêç\n     * @param {string} size - Â∞∫ÂØ∏Á±ªÂûã\n     * @returns {string} ÂÆåÊï¥ÁöÑOSS URL\n     */\n    getOSSUrl(filename, size = 'medium') {\n      if (!filename) {\n        return `${this.ossConfig.baseUrl}/static/placeholder.png?x-oss-process=image/resize,m_lfit,w_300,h_300/quality,q_70`\n      }\n      \n      // Á°Æ‰øùÊñá‰ª∂Âêç‰∏ç‰ª•ÊñúÊù†ÂºÄÂ§¥\n      const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename\n      \n      // Ê†πÊçÆÂ∞∫ÂØ∏Á±ªÂûãËÆæÁΩÆ‰∏çÂêåÁöÑÂ§ÑÁêÜÂèÇÊï∞\n      let params = ''\n      switch(size) {\n        case 'thumbnail':\n          params = '?x-oss-process=image/resize,m_lfit,w_150,h_150/quality,q_85'\n          break\n        case 'small':\n          params = '?x-oss-process=image/resize,m_lfit,w_300,h_300/quality,q_85'\n          break\n        case 'medium':\n          params = '?x-oss-process=image/resize,m_lfit,w_600,h_600/quality,q_80'\n          break\n        case 'large':\n          params = '?x-oss-process=image/resize,m_lfit,w_1200,h_1200/quality,q_85'\n          break\n        default:\n          params = '?x-oss-process=image/resize,m_lfit,w_600,h_600/quality,q_80'\n      }\n      \n      const fullUrl = `${this.ossConfig.baseUrl}/${cleanFilename}${params}`\n      \n      // Ë∞ÉËØï‰ø°ÊÅØ\n      console.log('HomePoster getOSSUrl:', {\n        originalFilename: filename,\n        cleanFilename,\n        size,\n        params,\n        fullUrl\n      })\n      \n      return fullUrl\n    },\n    \n    /**\n     * Â§ÑÁêÜÂõæÁâáÂä†ËΩΩÂÆåÊàê\n     */\n    handleImageLoad() {\n      this.imageLoading = false\n      this.imageError = false\n    },\n    \n    /**\n     * Â§ÑÁêÜÂõæÁâáÂä†ËΩΩÈîôËØØ\n     */\n    handleImageError() {\n      this.imageLoading = false\n      this.imageError = true\n      console.warn('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', this.posterData.imageUrl)\n      \n      // ÂèØ‰ª•Â∞ùËØï‰ΩøÁî®Â§áÁî®ÂõæÁâá\n      // this.$emit('image-error', this.posterData)\n    },\n    \n    /**\n     * Â§ÑÁêÜÁÇπÂáª‰∫ã‰ª∂\n     */\n    handleItemClick() {\n      this.$emit('item-click', this.posterData)\n      \n      // Â¶ÇÊûúÊúâËØ¶ÊÉÖÈ°µÈù¢ÔºåÂèØ‰ª•Ë∑≥ËΩ¨\n      if (this.posterData.id) {\n        uni.navigateTo({\n          url: `/pages/detail/detail?id=${this.posterData.id}`\n        })\n      }\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊï∞Â≠óÊòæÁ§∫\n     */\n    formatNumber(num) {\n      if (!num) return '0'\n      \n      if (num >= 10000) {\n        return (num / 10000).toFixed(1) + 'w'\n      } else if (num >= 1000) {\n        return (num / 1000).toFixed(1) + 'k'\n      }\n      \n      return num.toString()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.poster-item {\n  position: relative;\n  margin-bottom: 12px;\n  border-radius: 12px;\n  overflow: hidden;\n  background: #ffffff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n}\n\n.poster-item:active {\n  transform: scale(0.98);\n}\n\n.poster-image {\n  width: 100%;\n  display: block;\n  background-color: #f5f5f5;\n  transition: all 0.3s ease;\n}\n\n.poster-image:hover {\n  transform: scale(1.02);\n}\n\n/* Âä†ËΩΩÁä∂ÊÄÅ */\n.image-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n}\n\n.loading-spinner {\n  width: 24px;\n  height: 24px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #2EA3B7;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* ‰ø°ÊÅØË¶ÜÁõñÂ±Ç */\n.poster-info {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));\n  color: white;\n  padding: 16px 12px 12px;\n  transition: all 0.3s ease;\n}\n\n.poster-item:hover .poster-info {\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));\n  padding: 20px 12px 16px;\n}\n\n.poster-description {\n  font-size: 14px;\n  line-height: 1.4;\n  margin-bottom: 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.poster-stats {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.stat-item {\n  display: flex;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 4px 8px;\n  border-radius: 12px;\n  backdrop-filter: blur(4px);\n}\n\n.stat-icon {\n  font-size: 12px;\n  margin-right: 4px;\n}\n\n.stat-text {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n/* ËØÜÂà´ËÆ∞ÂΩïÁâπÊúâÊ†∑Âºè */\n.accuracy-text {\n  font-size: 12px;\n  color: #4CAF50;\n  font-weight: bold;\n  background: rgba(76, 175, 80, 0.2);\n  padding: 2px 6px;\n  border-radius: 8px;\n}\n\n.date-text {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.7);\n  font-style: italic;\n}\n\n/* ÂìçÂ∫îÂºèÈÄÇÈÖç */\n@media (max-width: 480px) {\n  .poster-info {\n    padding: 12px 8px 8px;\n  }\n  \n  .poster-description {\n    font-size: 13px;\n  }\n  \n  .stat-text,\n  .accuracy-text {\n    font-size: 11px;\n  }\n  \n  .date-text {\n    font-size: 10px;\n  }\n}\n\n/* ÊöóËâ≤Ê®°ÂºèÈÄÇÈÖç */\n@media (prefers-color-scheme: dark) {\n  .poster-item {\n    background: #1a1a1a;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  }\n  \n  .poster-image {\n    background-color: #2a2a2a;\n  }\n}\n</style>","import Component from 'D:/sitpÈ°πÁõÆ/miniprogram/bird-frontend/components/homeposter.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;AAkDA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS,OAAO;AAAA,QACd,IAAI;AAAA,QACJ,UAAU;AAAA,QACV,aAAa;AAAA,QACb,aAAa;AAAA,QACb,OAAO;AAAA,QACP,OAAO;AAAA,QACP,UAAU;AAAA,QACV,MAAM;AAAA;IAEV;AAAA,EACD;AAAA,EAED,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,YAAY;AAAA;AAAA,MAEZ,WAAW;AAAA,QACT,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACD;AAAA,EAED,UAAU;AAAA;AAAA;AAAA;AAAA,IAIR,WAAW;AACT,aAAO,KAAK,UAAU,KAAK,WAAW,YAAY,KAAK,WAAW,KAAK,QAAQ;AAAA,IACjF;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOP,UAAU,UAAU,OAAO,UAAU;AACnC,UAAI,CAAC,UAAU;AACb,eAAO,GAAG,KAAK,UAAU,OAAO;AAAA,MAClC;AAGA,YAAM,gBAAgB,SAAS,WAAW,GAAG,IAAI,SAAS,MAAM,CAAC,IAAI;AAGrE,UAAI,SAAS;AACb,cAAO,MAAI;AAAA,QACT,KAAK;AACH,mBAAS;AACT;AAAA,QACF,KAAK;AACH,mBAAS;AACT;AAAA,QACF,KAAK;AACH,mBAAS;AACT;AAAA,QACF,KAAK;AACH,mBAAS;AACT;AAAA,QACF;AACE,mBAAS;AAAA,MACb;AAEA,YAAM,UAAU,GAAG,KAAK,UAAU,OAAO,IAAI,aAAa,GAAG,MAAM;AAGnEA,oBAAAA,MAAA,MAAA,OAAA,oCAAY,yBAAyB;AAAA,QACnC,kBAAkB;AAAA,QAClB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,OACD;AAED,aAAO;AAAA,IACR;AAAA;AAAA;AAAA;AAAA,IAKD,kBAAkB;AAChB,WAAK,eAAe;AACpB,WAAK,aAAa;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA,IAKD,mBAAmB;AACjB,WAAK,eAAe;AACpB,WAAK,aAAa;AAClBA,oBAAA,MAAA,MAAA,QAAA,oCAAa,WAAW,KAAK,WAAW,QAAQ;AAAA,IAIjD;AAAA;AAAA;AAAA;AAAA,IAKD,kBAAkB;AAChB,WAAK,MAAM,cAAc,KAAK,UAAU;AAGxC,UAAI,KAAK,WAAW,IAAI;AACtBA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,2BAA2B,KAAK,WAAW,EAAE;AAAA,SACnD;AAAA,MACH;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,aAAa,KAAK;AAChB,UAAI,CAAC;AAAK,eAAO;AAEjB,UAAI,OAAO,KAAO;AAChB,gBAAQ,MAAM,KAAO,QAAQ,CAAC,IAAI;AAAA,MACpC,WAAW,OAAO,KAAM;AACtB,gBAAQ,MAAM,KAAM,QAAQ,CAAC,IAAI;AAAA,MACnC;AAEA,aAAO,IAAI,SAAS;AAAA,IACtB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1LA,GAAG,gBAAgB,SAAS;"}