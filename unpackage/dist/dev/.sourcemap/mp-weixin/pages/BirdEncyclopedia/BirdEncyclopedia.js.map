{"version":3,"file":"BirdEncyclopedia.js","sources":["pages/BirdEncyclopedia/BirdEncyclopedia.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQmlyZEVuY3ljbG9wZWRpYS9CaXJkRW5jeWNsb3BlZGlhLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"encyclopedia-container\">\n      <!-- 自定义导航栏 -->\n      <view class=\"custom-navbar\">\n        <view class=\"navbar-left\" @click=\"goBack\">\n          <image :src=\"getOSSUrl('static/icons/back.png', 'icon')\" class=\"back-icon\" @error=\"onIconError\"></image>\n        </view>\n        <text class=\"navbar-title\">鸟类图鉴</text>\n        <view class=\"navbar-right\">\n          <view \n            class=\"mode-switch\" \n            @click=\"toggleMode\"\n            :class=\"{ 'mode-switch-active': currentMode === 'general' }\"\n          >\n            <image \n              :src=\"getOSSUrl(currentMode === 'search' ? 'static/icons/book.png' : 'static/icons/search.png', 'icon')\" \n              class=\"mode-icon\"\n              @error=\"onIconError\"\n            ></image>\n          </view>\n        </view>\n      </view>\n  \n      <!-- 搜索模式 -->\n      <view v-if=\"currentMode === 'search'\" class=\"search-mode\">\n        <!-- 搜索栏 -->\n        <view class=\"search-section\">\n          <view class=\"search-input-wrapper\">\n            <image :src=\"getOSSUrl('static/icons/search.png', 'icon')\" class=\"search-icon\" @error=\"onIconError\"></image>\n            <input \n              type=\"text\" \n              placeholder=\"搜索鸟类名称或特征...\"\n              v-model=\"searchKeyword\"\n              @input=\"onSearchInput\"\n              @confirm=\"handleSearchConfirm\"\n              class=\"search-input\"\n              confirm-type=\"search\"\n            />\n            <view \n              v-if=\"searchKeyword\" \n              class=\"clear-btn\" \n              @click=\"clearSearch\"\n            >\n              <image :src=\"getOSSUrl('static/icons/close.png', 'small-icon')\" class=\"clear-icon\" @error=\"onIconError\"></image>\n            </view>\n          </view>\n        </view>\n  \n        <!-- 搜索结果 -->\n        <view class=\"search-results\">\n          <view v-if=\"isSearching\" class=\"loading-container\">\n            <view class=\"loading-spinner\"></view>\n            <text class=\"loading-text\">搜索中...</text>\n          </view>\n  \n          <view v-else-if=\"searchResults.length > 0\" class=\"results-grid\">\n            <view \n              v-for=\"(bird, index) in searchResults\" \n              :key=\"bird.id\"\n              class=\"result-card\"\n              @click=\"selectBird(bird)\"\n              :style=\"{ 'animation-delay': `${index * 0.1}s` }\"\n            >\n              <image :src=\"getOSSUrl(bird.imageUrl, 'medium')\" class=\"result-image\" mode=\"aspectFill\" @error=\"onImageError\"></image>\n              <view class=\"result-content\">\n                <text class=\"result-name\">{{ bird.name }}</text>\n                <text class=\"result-scientific\">{{ bird.scientificName }}</text>\n                <view class=\"result-tags\">\n                  <text v-for=\"tag in bird.tags\" :key=\"tag\" class=\"result-tag\">{{ tag }}</text>\n                </view>\n              </view>\n            </view>\n          </view>\n  \n          <view v-else-if=\"searchKeyword && !isSearching\" class=\"no-results\">\n            <image :src=\"getOSSUrl('static/icons/no-search-results.png', 'large')\" class=\"no-results-icon\" @error=\"onIconError\"></image>\n            <text class=\"no-results-text\">未找到相关鸟类</text>\n            <text class=\"no-results-subtitle\">尝试搜索其他关键词</text>\n          </view>\n  \n          <view v-else class=\"search-placeholder\">\n            <image :src=\"getOSSUrl('static/icons/search-placeholder.png', 'large')\" class=\"placeholder-icon\" @error=\"onIconError\"></image>\n            <text class=\"placeholder-text\">输入鸟类名称开始搜索</text>\n            <text class=\"placeholder-subtitle\">支持中文名、英文名或特征描述</text>\n          </view>\n        </view>\n      </view>\n  \n      <!-- 通识模式 - 卡片翻阅 -->\n      <view v-else class=\"general-mode\">\n        <!-- 进度指示器 -->\n        <view class=\"progress-indicator\">\n          <text class=\"progress-text\">{{ currentDisplayPage }} / {{ safeTotalCards }}</text>\n          <view class=\"progress-bar\">\n            <view \n              class=\"progress-fill\" \n              :style=\"{ width: `${safeTotalCards > 0 ? (currentDisplayPage / safeTotalCards) * 100 : 0}%` }\"\n            ></view>\n          </view>\n        </view>\n  \n        <!-- 卡片容器 - 重新设计的翻页效果 -->\n        <view class=\"card-stack-container\">\n          <view \n            class=\"card-stack\"\n            @touchstart=\"onTouchStart\"\n            @touchmove=\"onTouchMove\"\n            @touchend=\"onTouchEnd\"\n          >\n            <!-- 背景卡片（下一张的预览） -->\n            <view \n              v-if=\"safeCurrentIndex < safeTotalCards - 1 && safeTotalCards > 1\"\n              class=\"card-item background-card\"\n              :style=\"backgroundCardStyle\"\n            >\n              <bird-knowledge-card \n                :bird-data=\"birdCards[safeCurrentIndex + 1]\"\n                :is-active=\"false\"\n                @like=\"onCardLike\"\n                @share=\"onCardShare\"\n              ></bird-knowledge-card>\n            </view>\n            \n            <!-- 当前卡片 -->\n            <view \n              v-if=\"safeTotalCards > 0 && birdCards[safeCurrentIndex]\"\n              class=\"card-item current-card\"\n              :style=\"currentCardStyle\"\n              :class=\"{ 'card-flipping': isFlipping }\"\n            >\n              <bird-knowledge-card \n                :bird-data=\"birdCards[safeCurrentIndex]\"\n                :is-active=\"true\"\n                @like=\"onCardLike\"\n                @share=\"onCardShare\"\n              ></bird-knowledge-card>\n            </view>\n          </view>\n        </view>\n  \n        <!-- 操作提示 -->\n        <view class=\"operation-tips\" :class=\"{ 'tips-hidden': isFlipping }\">\n          <view class=\"tip-item\">\n            <image :src=\"getOSSUrl('static/icons/swipe-up.png', 'small-icon')\" class=\"tip-icon\" @error=\"onIconError\"></image>\n            <text class=\"tip-text\">上滑查看下一张</text>\n          </view>\n          <view class=\"tip-item\">\n            <image :src=\"getOSSUrl('static/icons/tap.png', 'small-icon')\" class=\"tip-icon\" @error=\"onIconError\"></image>\n            <text class=\"tip-text\">点击卡片查看详情</text>\n          </view>\n        </view>\n  \n        <!-- 底部导航按钮 -->\n        <view class=\"bottom-actions\">\n          <view \n            class=\"action-button prev-btn\"\n            :class=\"{ 'btn-disabled': !canGoPrevious }\"\n            @click=\"previousCard\"\n          >\n            <image :src=\"getOSSUrl('static/icons/prev.png', 'small-icon')\" class=\"action-icon\" @error=\"onIconError\"></image>\n            <text class=\"action-text\">上一张</text>\n          </view>\n  \n          <view class=\"card-counter\">\n            <text class=\"counter-text\">{{ currentDisplayPage }}</text>\n            <view class=\"counter-divider\"></view>\n            <text class=\"counter-total\">{{ safeTotalCards }}</text>\n          </view>\n  \n          <view \n            class=\"action-button next-btn\"\n            :class=\"{ 'btn-disabled': !canGoNext }\"\n            @click=\"nextCard\"\n          >\n            <text class=\"action-text\">下一张</text>\n            <image :src=\"getOSSUrl('static/icons/next.png', 'small-icon')\" class=\"action-icon\" @error=\"onIconError\"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  </template>\n  \n  <script setup>\n  import { ref, computed, onMounted, nextTick, watch } from 'vue';\n  import BirdKnowledgeCard from '@/components/BirdKnowledgeCard.vue';\n  \n  // ========== 响应式数据 ==========\n  const currentMode = ref('search'); // 'search' | 'general'\n  const searchKeyword = ref('');\n  const isSearching = ref(false);\n  const searchResults = ref([]);\n  const currentCardIndex = ref(0); // 确保始终为数字类型\n  const birdCards = ref([]);\n  \n  // ========== OSS配置 ==========\n  const ossConfig = {\n    baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com'\n  };\n  \n  // ========== OSS工具方法 ==========\n  /**\n   * 获取OSS图片URL\n   * @param {string} filename - 文件名\n   * @param {string} size - 尺寸类型\n   * @returns {string} 完整的OSS URL\n   */\n  const getOSSUrl = (filename, size = 'icon') => {\n    if (!filename) return '';\n    \n    // 确保文件名不以斜杠开头\n    const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename;\n    \n    // 根据尺寸类型设置不同的处理参数\n    let params = '';\n    switch(size) {\n      case 'icon':\n        params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n        break;\n      case 'small-icon':\n        params = '?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90';\n        break;\n      case 'medium':\n        params = '?x-oss-process=image/resize,m_lfit,w_200,h_200/quality,q_85';\n        break;\n      case 'large':\n        params = '?x-oss-process=image/resize,m_lfit,w_120,h_120/quality,q_90';\n        break;\n      case 'bird-image':\n        params = '?x-oss-process=image/resize,m_lfit,w_600,h_400/quality,q_85';\n        break;\n      default:\n        params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n    }\n    \n    return `${ossConfig.baseUrl}/${cleanFilename}${params}`;\n  };\n  \n  // ========== 卡片翻页动画相关状态 ==========\n  const isFlipping = ref(false);\n  const touchStartY = ref(0);\n  const touchCurrentY = ref(0);\n  const cardTranslateY = ref(0);\n  const cardOpacity = ref(1);\n  const cardScale = ref(1);\n  const backgroundCardScale = ref(0.95);\n  const backgroundCardOpacity = ref(0.7);\n  \n  // ========== 模拟鸟类数据 ==========\n  const mockBirdData = [\n    {\n      id: 1,\n      name: '巨嘴鸟',\n      scientificName: 'Ramphastos sulfuratus',\n      imageUrl: 'static/birds/toucan.jpg',\n      tags: ['热带鸟类', '彩色', '大型'],\n      habitat: '热带雨林',\n      size: '体长50-65cm',\n      weight: '500-860克',\n      wingspan: '109-152cm',\n      diet: '主要以果实为食，偶尔捕食小型动物',\n      behavior: '群居性鸟类，善于飞行和攀爬',\n      distribution: '中美洲和南美洲的热带雨林',\n      conservationStatus: '无危',\n      characteristics: [\n        '拥有巨大而彩色的喙',\n        '羽毛色彩鲜艳',\n        '飞行能力强',\n        '社交性强'\n      ],\n      funFacts: [\n        '巨嘴鸟的大喙实际上很轻，内部充满了气囊',\n        '它们的喙可以占到身体长度的1/3',\n        '巨嘴鸟睡觉时会将喙折叠到背上'\n      ],\n      callDescription: '发出低沉的咕咕声和尖锐的叫声',\n      nestingHabits: '在树洞中筑巢，每次产卵2-4枚',\n      lifespan: '野外约15-20年'\n    },\n    {\n      id: 2,\n      name: '蜂鸟',\n      scientificName: 'Trochilidae',\n      imageUrl: 'static/birds/hummingbird.jpg',\n      tags: ['小型鸟类', '快速', '悬停'],\n      habitat: '花园、森林边缘',\n      size: '体长5-25cm',\n      weight: '2-20克',\n      wingspan: '5-25cm',\n      diet: '花蜜、小昆虫',\n      behavior: '能够悬停飞行，翅膀拍打频率极高',\n      distribution: '南北美洲',\n      conservationStatus: '大多数种类稳定',\n      characteristics: [\n        '世界上最小的鸟类',\n        '能够悬停和倒飞',\n        '心跳频率极快',\n        '新陈代谢旺盛'\n      ],\n      funFacts: [\n        '蜂鸟的翅膀每秒可拍打80次',\n        '它们的心跳每分钟可达1260次',\n        '蜂鸟可以倒着飞行',\n        '它们的舌头比喙还要长'\n      ],\n      callDescription: '发出细小的吱吱声',\n      nestingHabits: '建造精巧的杯状巢，每次产卵1-3枚',\n      lifespan: '野外约3-5年'\n    },\n    {\n      id: 3,\n      name: '孔雀',\n      scientificName: 'Pavo cristatus',\n      imageUrl: 'static/birds/peacock.jpg',\n      tags: ['大型鸟类', '华丽', '地栖'],\n      habitat: '森林、公园、农田',\n      size: '体长100-115cm',\n      weight: '4-6公斤',\n      wingspan: '120-160cm',\n      diet: '种子、昆虫、小型爬行动物',\n      behavior: '雄鸟会展开尾羽进行求偶炫耀',\n      distribution: '南亚、东南亚',\n      conservationStatus: '无危',\n      characteristics: [\n        '雄鸟有华丽的尾羽',\n        '能够短距离飞行',\n        '叫声洪亮',\n        '具有强烈的领域性'\n      ],\n      funFacts: [\n        '孔雀的尾羽可以长达1.5米',\n        '尾羽上的眼斑叫做\"眼状斑\"',\n        '孔雀实际上可以飞行，但不擅长长距离飞行',\n        '雌孔雀被称为\"孔雀雌\"'\n      ],\n      callDescription: '发出尖锐的叫声，特别是在求偶季节',\n      nestingHabits: '在地面筑巢，每次产卵3-5枚',\n      lifespan: '野外约15-20年'\n    },\n    {\n      id: 4,\n      name: '老鹰',\n      scientificName: 'Aquila chrysaetos',\n      imageUrl: 'static/birds/eagle.jpg',\n      tags: ['猛禽', '大型', '捕食者'],\n      habitat: '山地、草原、森林',\n      size: '体长75-100cm',\n      weight: '3-7公斤',\n      wingspan: '180-280cm',\n      diet: '小型哺乳动物、鸟类、鱼类',\n      behavior: '优秀的猎手，视力极佳',\n      distribution: '全球各大洲（除南极洲）',\n      conservationStatus: '部分种类濒危',\n      characteristics: [\n        '视力是人类的8倍',\n        '强有力的爪子和喙',\n        '飞行能力极强',\n        '领域性强'\n      ],\n      funFacts: [\n        '老鹰可以从3公里外发现猎物',\n        '它们的俯冲速度可达每小时300公里',\n        '老鹰可以活到30岁以上',\n        '许多文化将老鹰视为力量和自由的象征'\n      ],\n      callDescription: '发出尖锐的啸叫声',\n      nestingHabits: '在高处筑大型巢穴，每次产卵1-3枚',\n      lifespan: '野外约20-30年'\n    }\n  ];\n  \n  // ========== 计算属性 ==========\n  \n  /**\n   * 安全的当前页码（确保为数字且在有效范围内）\n   */\n  const safeCurrentIndex = computed(() => {\n    const index = parseInt(currentCardIndex.value) || 0;\n    const totalCards = parseInt(birdCards.value.length) || 0;\n    if (totalCards === 0) return 0;\n    return Math.max(0, Math.min(index, totalCards - 1));\n  });\n  \n  /**\n   * 安全的总页数\n   */\n  const safeTotalCards = computed(() => {\n    return parseInt(birdCards.value.length) || 0;\n  });\n  \n  /**\n   * 当前显示页码（从1开始）\n   */\n  const currentDisplayPage = computed(() => {\n    return safeCurrentIndex.value + 1;\n  });\n  \n  /**\n   * 是否可以向前翻页\n   */\n  const canGoPrevious = computed(() => {\n    return safeCurrentIndex.value > 0 && !isFlipping.value && safeTotalCards.value > 0;\n  });\n  \n  /**\n   * 是否可以向后翻页\n   */\n  const canGoNext = computed(() => {\n    return safeCurrentIndex.value < safeTotalCards.value - 1 && !isFlipping.value && safeTotalCards.value > 0;\n  });\n  \n  /**\n   * 当前卡片的样式\n   */\n  const currentCardStyle = computed(() => ({\n    transform: `translateY(${cardTranslateY.value}px) scale(${cardScale.value})`,\n    opacity: cardOpacity.value,\n    zIndex: 10\n  }));\n  \n  /**\n   * 背景卡片的样式\n   */\n  const backgroundCardStyle = computed(() => ({\n    transform: `scale(${backgroundCardScale.value})`,\n    opacity: backgroundCardOpacity.value,\n    zIndex: 5\n  }));\n  \n  // ========== 触摸事件处理 ==========\n  \n  /**\n   * 触摸开始\n   * @param {Object} event - 触摸事件\n   */\n  const onTouchStart = (event) => {\n    if (isFlipping.value) return;\n    touchStartY.value = event.touches[0].clientY;\n    touchCurrentY.value = event.touches[0].clientY;\n  };\n  \n  /**\n   * 触摸移动\n   * @param {Object} event - 触摸事件\n   */\n  const onTouchMove = (event) => {\n    if (isFlipping.value || birdCards.value.length === 0) return;\n    \n    touchCurrentY.value = event.touches[0].clientY;\n    const deltaY = touchCurrentY.value - touchStartY.value;\n    \n    // 只处理向上滑动，并确保不是最后一张卡片\n    const currentIndex = parseInt(currentCardIndex.value) || 0;\n    const totalCards = parseInt(birdCards.value.length) || 0;\n    \n    if (deltaY < 0 && currentIndex < totalCards - 1) {\n      const progress = Math.min(Math.abs(deltaY) / 200, 1);\n      \n      // 当前卡片渐变效果\n      cardTranslateY.value = deltaY;\n      cardOpacity.value = 1 - progress * 0.7;\n      cardScale.value = 1 - progress * 0.1;\n      \n      // 背景卡片渐变效果\n      backgroundCardScale.value = 0.95 + progress * 0.05;\n      backgroundCardOpacity.value = 0.7 + progress * 0.3;\n    }\n  };\n  \n  /**\n   * 触摸结束\n   * @param {Object} event - 触摸事件\n   */\n  const onTouchEnd = (event) => {\n    if (isFlipping.value || birdCards.value.length === 0) return;\n    \n    const deltaY = touchCurrentY.value - touchStartY.value;\n    \n    // 判断是否触发翻页（向上滑动超过100px）\n    if (deltaY < -100 && currentCardIndex.value < birdCards.value.length - 1) {\n      nextCard();\n    } else {\n      // 恢复原位\n      resetCardPosition();\n    }\n  };\n  \n  /**\n   * 重置卡片位置\n   */\n  const resetCardPosition = () => {\n    cardTranslateY.value = 0;\n    cardOpacity.value = 1;\n    cardScale.value = 1;\n    backgroundCardScale.value = 0.95;\n    backgroundCardOpacity.value = 0.7;\n  };\n  \n  // ========== 事件处理函数 ==========\n  \n  /**\n   * 返回上一页\n   */\n  const goBack = () => {\n    uni.navigateBack();\n  };\n  \n  /**\n   * 切换模式\n   */\n  const toggleMode = () => {\n    currentMode.value = currentMode.value === 'search' ? 'general' : 'search';\n    \n    // 模式切换时的反馈\n    uni.vibrateShort();\n    \n    // 如果切换到通识模式，确保有数据\n    if (currentMode.value === 'general' && birdCards.value.length === 0) {\n      initGeneralMode();\n    }\n  };\n  \n  /**\n   * 搜索输入处理\n   */\n  const onSearchInput = () => {\n    if (searchKeyword.value.trim()) {\n      performSearch();\n    } else {\n      searchResults.value = [];\n    }\n  };\n  \n  /**\n   * 搜索确认处理\n   */\n  const handleSearchConfirm = () => {\n    if (searchKeyword.value.trim()) {\n      performSearch();\n    }\n  };\n  \n  /**\n   * 清除搜索\n   */\n  const clearSearch = () => {\n    searchKeyword.value = '';\n    searchResults.value = [];\n  };\n  \n  /**\n   * 选择鸟类（从搜索结果）\n   * @param {Object} bird - 鸟类数据\n   */\n  const selectBird = (bird) => {\n    // 切换到通识模式并定位到选中的鸟类\n    currentMode.value = 'general';\n    const index = birdCards.value.findIndex(card => card.id === bird.id);\n    if (index !== -1) {\n      // 确保索引是数字类型\n      currentCardIndex.value = parseInt(index);\n    }\n    \n    // 清除搜索状态\n    searchKeyword.value = '';\n    searchResults.value = [];\n    \n    // 重置卡片状态\n    resetCardPosition();\n  };\n  \n  /**\n   * 上一张卡片\n   */\n  const previousCard = () => {\n    // 严格的边界检查和类型检查\n    const currentIndex = parseInt(currentCardIndex.value) || 0;\n    const totalCards = parseInt(birdCards.value.length) || 0;\n    \n    if (currentIndex > 0 && !isFlipping.value && totalCards > 0) {\n      isFlipping.value = true;\n      \n      // 翻页动画\n      cardTranslateY.value = 50;\n      cardOpacity.value = 0;\n      \n      setTimeout(() => {\n        // 确保索引是有效的数字\n        const newIndex = Math.max(0, currentIndex - 1);\n        currentCardIndex.value = newIndex;\n        resetCardPosition();\n        isFlipping.value = false;\n      }, 300);\n    }\n  };\n  \n  /**\n   * 下一张卡片\n   */\n  const nextCard = () => {\n    // 严格的边界检查和类型检查\n    const currentIndex = parseInt(currentCardIndex.value) || 0;\n    const totalCards = parseInt(birdCards.value.length) || 0;\n    \n    if (currentIndex < totalCards - 1 && !isFlipping.value && totalCards > 0) {\n      isFlipping.value = true;\n      \n      // 翻页动画\n      cardTranslateY.value = -200;\n      cardOpacity.value = 0;\n      cardScale.value = 0.8;\n      \n      setTimeout(() => {\n        // 确保索引是有效的数字\n        const newIndex = Math.min(totalCards - 1, currentIndex + 1);\n        currentCardIndex.value = newIndex;\n        resetCardPosition();\n        isFlipping.value = false;\n      }, 300);\n      \n      // 震动反馈\n      uni.vibrateShort();\n    }\n  };\n  \n  /**\n   * 卡片点赞\n   * @param {Object} bird - 鸟类数据\n   */\n  const onCardLike = (bird) => {\n    uni.showToast({\n      title: '已收藏',\n      icon: 'success'\n    });\n  };\n  \n  /**\n   * 卡片分享\n   * @param {Object} bird - 鸟类数据\n   */\n  const onCardShare = (bird) => {\n    uni.showShareMenu({\n      title: `分享鸟类：${bird.name}`,\n      path: `/pages/BirdEncyclopedia/BirdEncyclopedia?birdId=${bird.id}`\n    });\n  };\n  \n  // ========== 业务逻辑函数 ==========\n  \n  /**\n   * 执行搜索\n   */\n  const performSearch = async () => {\n    try {\n      isSearching.value = true;\n      \n      // 模拟API延迟\n      await new Promise(resolve => setTimeout(resolve, 300));\n      \n      // 模拟搜索逻辑\n      const keyword = searchKeyword.value.toLowerCase();\n      const results = mockBirdData.filter(bird => \n        bird.name.toLowerCase().includes(keyword) ||\n        bird.scientificName.toLowerCase().includes(keyword) ||\n        bird.tags.some(tag => tag.includes(keyword)) ||\n        bird.habitat.includes(keyword)\n      );\n      \n      searchResults.value = results;\n      \n    } catch (error) {\n      console.error('搜索失败:', error);\n      uni.showToast({\n        title: '搜索失败',\n        icon: 'error'\n      });\n    } finally {\n      isSearching.value = false;\n    }\n  };\n  \n  /**\n   * 初始化通识模式\n   */\n  const initGeneralMode = () => {\n    birdCards.value = [...mockBirdData];\n    // 确保索引重置为0且为数字类型\n    currentCardIndex.value = 0;\n    resetCardPosition();\n  };\n  \n  /**\n   * 加载鸟类数据\n   */\n  const loadBirdData = async () => {\n    try {\n      // TODO: 调用实际API\n      // const response = await birdAPI.getEncyclopedia();\n      \n      // 使用模拟数据\n      birdCards.value = [...mockBirdData];\n      \n    } catch (error) {\n      console.error('加载数据失败:', error);\n      uni.showToast({\n        title: '加载失败',\n        icon: 'error'\n      });\n    }\n  };\n  \n  /**\n   * 图标加载失败处理\n   * @param {Event} error - 错误事件\n   */\n  const onIconError = (error) => {\n    console.warn('图标加载失败:', error);\n    // 可以设置默认图标或其他降级处理\n  };\n  \n  /**\n   * 图片加载失败处理\n   * @param {Event} error - 错误事件\n   */\n  const onImageError = (error) => {\n    console.warn('图片加载失败:', error);\n    // 可以设置默认图片或其他降级处理\n  };\n  \n  // ========== 监听器 ==========\n  \n  /**\n   * 监听数据变化，确保索引始终有效\n   */\n  watch([birdCards, currentCardIndex], ([newBirdCards, newIndex]) => {\n    const totalCards = parseInt(newBirdCards.length) || 0;\n    const currentIndex = parseInt(newIndex) || 0;\n    \n    if (totalCards > 0) {\n      // 确保索引在有效范围内\n      const validIndex = Math.max(0, Math.min(currentIndex, totalCards - 1));\n      if (validIndex !== currentIndex) {\n        currentCardIndex.value = validIndex;\n      }\n    } else {\n      // 如果没有数据，重置为0\n      currentCardIndex.value = 0;\n    }\n  }, { deep: true });\n  \n  // ========== 生命周期 ==========\n  onMounted(async () => {\n    // 检查是否有传入的鸟类ID参数\n    const pages = getCurrentPages();\n    const currentPage = pages[pages.length - 1];\n    const options = currentPage.options || {};\n    \n    if (options.birdId) {\n      // 如果有指定鸟类ID，切换到通识模式并定位\n      currentMode.value = 'general';\n      await loadBirdData();\n      const targetId = parseInt(options.birdId);\n      const index = birdCards.value.findIndex(bird => bird.id === targetId);\n      if (index !== -1) {\n        // 确保索引是数字类型且在有效范围内\n        currentCardIndex.value = Math.max(0, Math.min(index, birdCards.value.length - 1));\n      }\n    } else {\n      // 默认加载数据\n      await loadBirdData();\n    }\n    \n    // 初始化卡片状态\n    resetCardPosition();\n    \n    // 确保索引在有效范围内\n    if (birdCards.value.length > 0) {\n      currentCardIndex.value = Math.max(0, Math.min(currentCardIndex.value, birdCards.value.length - 1));\n    }\n  });\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  // ========== 主容器样式 ==========\n  .encyclopedia-container {\n    min-height: 100vh;\n    background: linear-gradient(180deg, #f8fffe 0%, #ffffff 100%);\n    position: relative;\n  }\n  \n  // ========== 自定义导航栏样式 ==========\n  .custom-navbar {\n    height: 88rpx;\n    background: linear-gradient(135deg, #4caf50 0%, #43a047 100%);\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 32rpx;\n    padding-top: var(--status-bar-height, 0);\n    position: sticky;\n    top: 0;\n    z-index: 1000;\n    box-shadow: 0 2rpx 16rpx rgba(76, 175, 80, 0.2);\n  }\n  \n  .navbar-left, .navbar-right {\n    width: 80rpx;\n    height: 60rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  .back-icon {\n    width: 36rpx;\n    height: 36rpx;\n  }\n  \n  .navbar-title {\n    font-size: 32rpx;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n  }\n  \n  .mode-switch {\n    width: 60rpx;\n    height: 60rpx;\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 30rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s ease;\n    \n    &:active {\n      transform: scale(0.9);\n    }\n    \n    &.mode-switch-active {\n      background: rgba(255, 255, 255, 0.3);\n    }\n  }\n  \n  .mode-icon {\n    width: 32rpx;\n    height: 32rpx;\n  }\n  \n  // ========== 搜索模式样式 ==========\n  .search-mode {\n    flex: 1;\n    padding: 24rpx 32rpx;\n  }\n  \n  .search-section {\n    margin-bottom: 32rpx;\n  }\n  \n  .search-input-wrapper {\n    position: relative;\n    height: 88rpx;\n    background: white;\n    border-radius: 44rpx;\n    display: flex;\n    align-items: center;\n    padding: 0 24rpx;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n    border: 2rpx solid #f0f0f0;\n    transition: all 0.3s ease;\n    \n    &:focus-within {\n      border-color: #4caf50;\n      box-shadow: 0 4rpx 24rpx rgba(76, 175, 80, 0.15);\n    }\n  }\n  \n  .search-icon {\n    width: 36rpx;\n    height: 36rpx;\n    margin-right: 16rpx;\n    opacity: 0.6;\n  }\n  \n  .search-input {\n    flex: 1;\n    font-size: 28rpx;\n    color: #333;\n    height: 100%;\n  }\n  \n  .clear-btn {\n    width: 48rpx;\n    height: 48rpx;\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 24rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    &:active {\n      background: rgba(0, 0, 0, 0.1);\n    }\n  }\n  \n  .clear-icon {\n    width: 24rpx;\n    height: 24rpx;\n  }\n  \n  .search-results {\n    flex: 1;\n    min-height: 60vh;\n  }\n  \n  .loading-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 120rpx 0;\n  }\n  \n  .loading-spinner {\n    width: 60rpx;\n    height: 60rpx;\n    border: 4rpx solid #e0e0e0;\n    border-top-color: #4caf50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 20rpx;\n  }\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n  \n  .loading-text {\n    font-size: 28rpx;\n    color: #666;\n  }\n  \n  .results-grid {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 20rpx;\n  }\n  \n  .result-card {\n    background: white;\n    border-radius: 24rpx;\n    overflow: hidden;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n    transition: all 0.3s ease;\n    animation: slideInUp 0.5s ease both;\n    \n    &:active {\n      transform: scale(0.98);\n    }\n  }\n  \n  @keyframes slideInUp {\n    from {\n      opacity: 0;\n      transform: translateY(30rpx);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  .result-image {\n    width: 100%;\n    height: 200rpx;\n    object-fit: cover;\n  }\n  \n  .result-content {\n    padding: 24rpx;\n  }\n  \n  .result-name {\n    font-size: 32rpx;\n    font-weight: 600;\n    color: #333;\n    margin-bottom: 8rpx;\n    display: block;\n  }\n  \n  .result-scientific {\n    font-size: 24rpx;\n    color: #666;\n    font-style: italic;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .result-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8rpx;\n  }\n  \n  .result-tag {\n    background: rgba(76, 175, 80, 0.1);\n    color: #4caf50;\n    padding: 6rpx 12rpx;\n    border-radius: 12rpx;\n    font-size: 20rpx;\n    font-weight: 500;\n  }\n  \n  .no-results, .search-placeholder {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 120rpx 40rpx;\n    text-align: center;\n  }\n  \n  .no-results-icon, .placeholder-icon {\n    width: 120rpx;\n    height: 120rpx;\n    margin-bottom: 24rpx;\n    opacity: 0.6;\n  }\n  \n  .no-results-text, .placeholder-text {\n    font-size: 28rpx;\n    color: #666;\n    font-weight: 500;\n    margin-bottom: 8rpx;\n  }\n  \n  .no-results-subtitle, .placeholder-subtitle {\n    font-size: 24rpx;\n    color: #999;\n  }\n  \n  // ========== 通识模式样式 ==========\n  .general-mode {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: calc(100vh - 88rpx);\n  }\n  \n  .progress-indicator {\n    padding: 20rpx 32rpx;\n    background: white;\n  }\n  \n  .progress-text {\n    font-size: 24rpx;\n    color: #666;\n    text-align: center;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  .progress-bar {\n    height: 6rpx;\n    background: #f0f0f0;\n    border-radius: 3rpx;\n    overflow: hidden;\n  }\n  \n  .progress-fill {\n    height: 100%;\n    background: linear-gradient(90deg, #4caf50 0%, #66bb6a 100%);\n    border-radius: 3rpx;\n    transition: width 0.3s ease;\n  }\n  \n  // ========== 卡片堆叠容器样式 ==========\n  .card-stack-container {\n    flex: 1;\n    position: relative;\n    padding: 20rpx 32rpx;\n    margin-bottom: 20rpx;\n  }\n  \n  .card-stack {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    perspective: 1000px;\n  }\n  \n  .card-item {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: 32rpx;\n    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n    transform-origin: center center;\n  }\n  \n  .current-card {\n    z-index: 10;\n    \n    &.card-flipping {\n      transition: all 0.3s ease;\n    }\n  }\n  \n  .background-card {\n    z-index: 5;\n    filter: blur(1px);\n  }\n  \n  // ========== 操作提示样式 ==========\n  .operation-tips {\n    position: absolute;\n    right: 32rpx;\n    top: 50%;\n    transform: translateY(-50%);\n    display: flex;\n    flex-direction: column;\n    gap: 24rpx;\n    z-index: 15;\n    transition: opacity 0.3s ease;\n    \n    &.tips-hidden {\n      opacity: 0;\n    }\n  }\n  \n  .tip-item {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    background: rgba(0, 0, 0, 0.6);\n    padding: 12rpx 16rpx;\n    border-radius: 20rpx;\n    opacity: 0.7;\n    backdrop-filter: blur(10rpx);\n  }\n  \n  .tip-icon {\n    width: 24rpx;\n    height: 24rpx;\n  }\n  \n  .tip-text {\n    font-size: 20rpx;\n    color: white;\n  }\n  \n  // ========== 底部操作栏样式 ==========\n  .bottom-actions {\n    height: 120rpx;\n    background: white;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 40rpx;\n    border-top: 1rpx solid #f0f0f0;\n    box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n  }\n  \n  .action-button {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    padding: 16rpx 24rpx;\n    background: rgba(76, 175, 80, 0.1);\n    border-radius: 24rpx;\n    transition: all 0.3s ease;\n    \n    &:active:not(.btn-disabled) {\n      transform: scale(0.95);\n      background: rgba(76, 175, 80, 0.2);\n    }\n    \n    &.btn-disabled {\n      opacity: 0.3;\n      pointer-events: none;\n    }\n  }\n  \n  .action-icon {\n    width: 24rpx;\n    height: 24rpx;\n  }\n  \n  .action-text {\n    font-size: 24rpx;\n    color: #4caf50;\n    font-weight: 500;\n  }\n  \n  .card-counter {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n  }\n  \n  .counter-text, .counter-total {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #333;\n  }\n  \n  .counter-text {\n    color: #4caf50;\n  }\n  \n  .counter-divider {\n    width: 2rpx;\n    height: 24rpx;\n    background: #ddd;\n  }\n  \n  // ========== 响应式适配 ==========\n  @media screen and (max-width: 750rpx) {\n    .search-mode {\n      padding: 20rpx 24rpx;\n    }\n    \n    .card-stack-container {\n      padding: 16rpx 24rpx;\n    }\n    \n    .operation-tips {\n      right: 24rpx;\n    }\n    \n    .bottom-actions {\n      padding: 0 32rpx;\n    }\n  }\n  </style>","import MiniProgramPage from 'D:/sitp项目/miniprogram/bird-frontend/pages/BirdEncyclopedia/BirdEncyclopedia.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","watch","onMounted"],"mappings":"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"}