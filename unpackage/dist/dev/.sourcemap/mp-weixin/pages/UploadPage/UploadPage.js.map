{"version":3,"file":"UploadPage.js","sources":["pages/UploadPage/UploadPage.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvVXBsb2FkUGFnZS9VcGxvYWRQYWdlLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <!-- Header Section -->\n        <view class=\"header\">\n            <text class=\"title\">像鸟儿一样</text><br/>\n\t\t\t<text class=\"title\">记得家的方向</text><br/>\n\t\t\t<text class=\"title\">认得人的模样</text><br/>\n\t\t\t<text class=\"title\">却忘了飞不过时光</text>\n        </view>\n\n        <!-- Main Content -->\n        <view class=\"main-content\">\n            <view v-if=\"imageUrl\" class=\"image-preview\">\n                <image :src=\"imageUrl\" mode=\"aspectFit\" class=\"preview-image\" @error=\"onImageError\"></image>\n            </view>\n            <view v-else class=\"placeholder\">\n                <text class=\"placeholder-text\">请选择可以清晰地观察到的鸟的照片喵~</text>\n            </view>\n        </view>\n       \n\t    <!-- Static Images -->\n\t    <view class=\"static-images\">\n\t        <image :src=\"getOSSUrl('static/icons/ellipse-48.png', 'tiny-icon')\" mode=\"aspectFit\" class=\"image-0\" @error=\"onIconError\"></image>\n\t        <image :src=\"getOSSUrl('static/icons/route-105.png', 'small-icon')\" mode=\"aspectFit\" class=\"image-1\" @error=\"onIconError\"></image>\n\t        <image :src=\"getOSSUrl('static/icons/route-106.png', 'icon')\" mode=\"aspectFit\" class=\"image-2\" @error=\"onIconError\"></image>\n\t    </view>\n\t\t\n\t\t<image :src=\"getOSSUrl('static/icons/icon_interfaces_mail.png', 'icon')\" mode=\"aspectFit\" class=\"envelope\" @error=\"onIconError\"></image>\n\n        <!-- Action Buttons -->\n        <view class=\"button-container\">\n            <view v-if=\"imageUrl\" class=\"two-buttons\">\n                <button class=\"btn btn-secondary\" @tap=\"handleReset\">\n                    重新上传\n                </button>\n                <button class=\"btn btn-primary\" @tap=\"handleAnalyze\">\n                    分析图片\n                </button>\n            </view>\n            <view v-else class=\"upload-buttons\">\n\t\t\t\t<image :src=\"getOSSUrl('static/icons/圆形 4.png', 'icon')\" mode=\"aspectFit\" class=\"btn circle\" @tap=\"handleUpload\" @error=\"onIconError\"></image>\n\t\t\t\t<image :src=\"getOSSUrl('static/icons/矩形 1.png', 'upload-bg')\" mode=\"aspectFit\" class=\"btn rectangle\" @tap=\"handleUpload\" @error=\"onIconError\"></image>\n\t\t\t\t<image :src=\"getOSSUrl('static/icons/箭头 1.png', 'small-icon')\" mode=\"aspectFit\" class=\"btn arrow\" @tap=\"handleUpload\" @error=\"onIconError\"></image>\n\t\t\t\t<image :src=\"getOSSUrl('static/icons/点击上传图片.png', 'upload-text')\" mode=\"aspectFit\" class=\"word\" @tap=\"handleUpload\" @error=\"onIconError\"></image>\n            </view>\n        </view>\n\t\t\n\t\t<!-- 添加底部导航栏 -->\n\t\t<tab-bar></tab-bar>\n    </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport TabBar from '@/components/tabbar.vue';\n\n// ========== 响应式数据 ==========\nconst imageUrl = ref('')\n\n// ========== OSS配置 ==========\nconst ossConfig = {\n  baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com'\n};\n\n// ========== OSS工具方法 ==========\n/**\n * 获取OSS图片URL\n * @param {string} filename - 文件名\n * @param {string} size - 尺寸类型\n * @returns {string} 完整的OSS URL\n */\nconst getOSSUrl = (filename, size = 'icon') => {\n  if (!filename) return '';\n  \n  // 确保文件名不以斜杠开头\n  const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename;\n  \n  // 根据尺寸类型设置不同的处理参数\n  let params = '';\n  switch(size) {\n    case 'icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n      break;\n    case 'small-icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90';\n      break;\n    case 'tiny-icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_16,h_16/quality,q_90';\n      break;\n    case 'avatar':\n      params = '?x-oss-process=image/resize,m_lfit,w_80,h_80/quality,q_90';\n      break;\n    case 'large':\n      params = '?x-oss-process=image/resize,m_lfit,w_120,h_120/quality,q_90';\n      break;\n    case 'medium':\n      params = '?x-oss-process=image/resize,m_lfit,w_200,h_200/quality,q_85';\n      break;\n    case 'banner':\n      params = '?x-oss-process=image/resize,m_lfit,w_750,h_400/quality,q_85';\n      break;\n    case 'post':\n      params = '?x-oss-process=image/resize,m_lfit,w_400,h_600/quality,q_85';\n      break;\n    case 'post-thumb':\n      params = '?x-oss-process=image/resize,m_lfit,w_300,h_450/quality,q_80';\n      break;\n    case 'upload-bg':\n      params = '?x-oss-process=image/resize,m_lfit,w_300,h_60/quality,q_85';\n      break;\n    case 'upload-text':\n      params = '?x-oss-process=image/resize,m_lfit,w_150,h_30/quality,q_90';\n      break;\n    default:\n      params = '?x-oss-process=image/resize,m_lfit,w_48,h_48/quality,q_90';\n  }\n  \n  return `${ossConfig.baseUrl}/${cleanFilename}${params}`;\n};\n\n// ========== 事件处理函数 ==========\n\n/**\n * 图片上传处理\n */\nconst handleUpload = () => {\n    uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n            imageUrl.value = res.tempFilePaths[0]\n            \n            // 添加上传成功提示\n            uni.showToast({\n                title: '图片上传成功',\n                icon: 'success',\n                duration: 1500\n            });\n        },\n        fail: (error) => {\n            console.error('图片选择失败:', error);\n            uni.showToast({\n                title: '图片选择失败',\n                icon: 'error',\n                duration: 2000\n            });\n        }\n    })\n}\n\n/**\n * 重置图片\n */\nconst handleReset = () => {\n    uni.showModal({\n        title: '确认重新上传',\n        content: '确定要重新选择图片吗？',\n        success: (res) => {\n            if (res.confirm) {\n                imageUrl.value = '';\n                uni.showToast({\n                    title: '已重置',\n                    icon: 'success',\n                    duration: 1000\n                });\n            }\n        }\n    });\n}\n\n/**\n * 分析图片处理\n */\nconst handleAnalyze = () => {\n    if (!imageUrl.value) {\n        uni.showToast({\n            title: '请先上传图片',\n            icon: 'none',\n            duration: 2000\n        });\n        return;\n    }\n    \n    uni.showLoading({\n        title: '正在分析图片...'\n    });\n    \n    // TODO: 实现图片分析功能\n    console.log('Analyzing image:', imageUrl.value);\n    \n    // 模拟分析过程\n    setTimeout(() => {\n        uni.hideLoading();\n        \n        // 跳转到结果页面或显示分析结果\n        uni.navigateTo({\n            url: `/pages/AnalysisResult/AnalysisResult?imageUrl=${encodeURIComponent(imageUrl.value)}`\n        });\n    }, 2000);\n}\n\n/**\n * 图标加载失败处理\n * @param {Event} error - 错误事件\n */\nconst onIconError = (error) => {\n  console.warn('图标加载失败:', error);\n  // 可以设置默认图标或其他降级处理\n};\n\n/**\n * 图片加载失败处理\n * @param {Event} error - 错误事件\n */\nconst onImageError = (error) => {\n  console.warn('图片加载失败:', error);\n  // 可以设置默认图片或其他降级处理\n};\n</script>\n\n<style>\n.container {\n    padding: 40rpx;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: #e6fae9;\n    position: relative;\n}\n\n.header {\n    text-align: left;\n    margin-bottom: 60rpx;\n    position: absolute;\n\tleft: 137px;\n\ttop: 149px;\n\twidth: 168px;\n\theight: 81px;\n\topacity: 1;\n}\n\n.title {\n    text-align: left;\n    line-height: 2;\n    color: #1e873c;\n    font-size: 28rpx;\n    font-weight: 400;\n    display: block;\n}\n\n.main-content {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-bottom: 60rpx;\n}\n\n.image-preview {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n}\n\n.preview-image {\n\tposition: absolute;\n\ttop: 250px;\n    width: 600rpx;\n    height: 600rpx;\n    border-radius: 20rpx;\n    box-shadow: 0 8rpx 32rpx rgba(30, 135, 60, 0.15);\n    border: 4rpx solid rgba(30, 135, 60, 0.1);\n}\n\n.placeholder {\n    padding: 40rpx;\n    text-align: center;\n\tposition: absolute;\n\tleft: 51px;\n\ttop: 484px;\n\twidth: 180px;\n\theight: 36px;\n\topacity: 1;\n}\n\n.placeholder-text {\n    color: #1e873c;\n    font-size: 28rpx;\n\twhite-space: nowrap;\n    font-weight: 400;\n    letter-spacing: 0px;\n    line-height: 26.06px;\n}\n\n.static-images {\n    position: absolute;\n\tleft: 14px;\n\ttop: 185px;\n    width: 50.33px;\n    height: 41.99px;\n\tz-index: 10;\n}\n\n.image-0 {\n\tposition: absolute;\n\tleft: 35.17px;\n\ttop: 26.41px;\n    width: 4px;\n    height: 4px;\n}\n\n.image-1 {\n\tposition: absolute;\n\tleft: 20.17px;\n\ttop: 0px;\n    width: 15.96px;\n    height: 21px;\n}\n\n.image-2 {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 4px;\n    width: 50.33px;\n    height: 37.99px;\n}\n\n.envelope {\n\tposition: absolute;\n\tleft: 44px;\n\ttop: 205px;\n\twidth: 46.25px;\n\theight: 41.49px;\n\topacity: 1;\n\ttransform: rotate(19.88deg);\n    transition: all 0.3s ease;\n}\n\n.envelope:hover {\n    transform: rotate(19.88deg) scale(1.1);\n}\n\n.button-container {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 549.59px;\n    width: 100%;\n    justify-content: center;\n    padding: 20rpx;\n}\n\n.two-buttons {\n    display: flex;\n    gap: 30rpx;\n    justify-content: center;\n    align-items: center;\n}\n\n.upload-buttons {\n    position: relative;\n    width: 100%;\n    height: 60px;\n}\n\n.btn {\n    padding: 20rpx 40rpx;\n    border-radius: 100rpx;\n    font-size: 28rpx;\n    transition: all 0.3s ease;\n    border: none;\n    outline: none;\n}\n\n.btn:active {\n    transform: scale(0.95);\n}\n\n.btn-primary {\n\tposition: absolute;\n\tleft: 60px;\n\ttop: 10px;\n    background-color: #059669;\n    color: white;\n    box-shadow: 0 4rpx 16rpx rgba(5, 150, 105, 0.3);\n}\n\n.btn-primary:active {\n    background-color: #047857;\n    box-shadow: 0 2rpx 8rpx rgba(5, 150, 105, 0.4);\n}\n\n.btn-secondary {\n\tposition: absolute;\n\tleft: 230px;\n\ttop: 10px;\n    background-color: #f3f4f6;\n    color: #1f2937;\n    border: 2rpx solid #e5e7eb;\n}\n\n.btn-secondary:active {\n    background-color: #e5e7eb;\n    border-color: #d1d5db;\n}\n\n.rectangle {\n\tposition: absolute;\n\tleft: 40px;\n\ttop: 0px;\n\twidth: 265px;\n\theight: 57px;\n\tz-index: 1;\n    transition: all 0.3s ease;\n}\n\n.circle {\n\tposition: absolute;\n\tleft: 55px;\n\ttop: 12px;\n\twidth: 36px;\n\theight: 36px;\n\topacity: 1;\n\tz-index: 2;\n    transition: all 0.3s ease;\n}\n\n.arrow {\n\tposition: absolute;\n\tleft: 60.5px;\n\ttop: 0px;\n\twidth: 26.02px;\n\theight: 60px;\n\topacity: 1;\n\tz-index: 3;\n    transition: all 0.3s ease;\n}\n\n.word {\n\tposition: absolute;\n\tleft: 133px;\n\ttop: 25px;\n\twidth: 124px;\n\theight: 25px;\n\topacity: 1;\n\tz-index: 4;\n    transition: all 0.3s ease;\n}\n\n/* 上传按钮组合的悬停效果 */\n.upload-buttons:active .rectangle {\n    transform: scale(0.98);\n    opacity: 0.9;\n}\n\n.upload-buttons:active .circle {\n    transform: scale(0.95);\n}\n\n.upload-buttons:active .arrow {\n    transform: translateX(5px);\n}\n\n.upload-buttons:active .word {\n    transform: scale(0.98);\n    opacity: 0.8;\n}\n\n/* 响应式适配 */\n@media screen and (max-width: 750rpx) {\n    .header {\n        left: 100px;\n        top: 120px;\n        width: 150px;\n    }\n    \n    .title {\n        font-size: 26rpx;\n        line-height: 1.8;\n    }\n    \n    .preview-image {\n        top: 200px;\n        width: 500rpx;\n        height: 500rpx;\n    }\n    \n    .placeholder {\n        left: 30px;\n        top: 400px;\n        width: 200px;\n    }\n    \n    .placeholder-text {\n        font-size: 26rpx;\n    }\n    \n    .static-images {\n        left: 10px;\n        top: 160px;\n    }\n    \n    .envelope {\n        left: 35px;\n        top: 180px;\n        width: 40px;\n        height: 35px;\n    }\n    \n    .button-container {\n        top: 480px;\n    }\n    \n    .rectangle {\n        left: 30px;\n        width: 240px;\n        height: 50px;\n    }\n    \n    .circle {\n        left: 45px;\n        top: 10px;\n        width: 32px;\n        height: 32px;\n    }\n    \n    .arrow {\n        left: 50px;\n        top: -2px;\n        width: 24px;\n        height: 55px;\n    }\n    \n    .word {\n        left: 120px;\n        top: 22px;\n        width: 110px;\n        height: 22px;\n    }\n    \n    .btn-primary {\n        left: 40px;\n        top: 8px;\n        padding: 16rpx 32rpx;\n        font-size: 26rpx;\n    }\n    \n    .btn-secondary {\n        left: 200px;\n        top: 8px;\n        padding: 16rpx 32rpx;\n        font-size: 26rpx;\n    }\n}\n\n/* 深色模式适配 */\n@media (prefers-color-scheme: dark) {\n    .container {\n        background-color: #064e3b;\n    }\n    \n    .title {\n        color: #a7f3d0;\n    }\n    \n    .placeholder-text {\n        color: #a7f3d0;\n    }\n    \n    .btn-primary {\n        background-color: #047857;\n    }\n    \n    .btn-secondary {\n        background-color: #374151;\n        color: #f9fafb;\n        border-color: #4b5563;\n    }\n    \n    .preview-image {\n        border-color: rgba(167, 243, 208, 0.2);\n        box-shadow: 0 8rpx 32rpx rgba(6, 78, 59, 0.3);\n    }\n}\n\n/* 动画效果 */\n@keyframes fadeInUp {\n    from {\n        opacity: 0;\n        transform: translateY(30rpx);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.image-preview {\n    animation: fadeInUp 0.6s ease-out;\n}\n\n.two-buttons {\n    animation: fadeInUp 0.6s ease-out 0.2s both;\n}\n\n/* 提升用户体验的加载效果 */\n.preview-image {\n    opacity: 0;\n    transition: opacity 0.3s ease;\n}\n\n.preview-image[src] {\n    opacity: 1;\n}\n</style>","import MiniProgramPage from 'D:/sitp项目/miniprogram/bird-frontend/pages/UploadPage/UploadPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":"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"}