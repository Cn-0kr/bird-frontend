{"version":3,"file":"MapPage.js","sources":["pages/MapPage/MapPage.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvTWFwUGFnZS9NYXBQYWdlLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"container\">\r\n        <!-- Search Bar -->\r\n        <view class=\"search-container\">\r\n            <view class=\"search-box\">\r\n                <text class=\"icon-search\">üîç</text>\r\n                <input\r\n                    type=\"text\"\r\n                    class=\"search-input\"\r\n                    placeholder=\"ÊêúÁ¥¢ÁõÆÁöÑÂú∞/È∏üÁ±ªÂêçÁß∞\"\r\n                    v-model=\"searchText\"\r\n                    @confirm=\"handleSearch\"\r\n                />\r\n            </view>\r\n        </view>\r\n\r\n        <!-- Map Container -->\r\n        <view class=\"map-container\">\r\n            <map\r\n                class=\"map\"\r\n                :latitude=\"latitude\"\r\n                :longitude=\"longitude\"\r\n                :markers=\"markers\"\r\n                :scale=\"scale\"\r\n                show-location\r\n            ></map>\r\n\r\n            <!-- My Location Button -->\r\n            <view class=\"location-btn\" @tap=\"moveToCurrentLocation\">\r\n                <text class=\"icon-location\">üìç</text>\r\n            </view>\r\n        </view>\r\n\t\t<!-- Ê∑ªÂä†Â∫ïÈÉ®ÂØºËà™Ê†è -->\r\n\t\t<tab-bar></tab-bar>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport TabBar from '@/components/tabbar.vue';\r\n// ÂìçÂ∫îÂºèÁä∂ÊÄÅ\r\nconst latitude = ref(31.2304)  // ÈªòËÆ§Á∫¨Â∫¶Ôºà‰∏äÊµ∑Ôºâ\r\nconst longitude = ref(121.4737)  // ÈªòËÆ§ÁªèÂ∫¶Ôºà‰∏äÊµ∑Ôºâ\r\nconst scale = ref(14)  // ÈªòËÆ§Áº©ÊîæÁ∫ßÂà´\r\nconst searchText = ref('')\r\nconst markers = ref([])\r\n\r\n// Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆ\r\nconst getCurrentLocation = () => {\r\n    // ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫\r\n    uni.showLoading({\r\n        title: 'ÂÆö‰Ωç‰∏≠...'\r\n    })\r\n    \r\n    // Áõ¥Êé•Ëé∑Âèñ‰ΩçÁΩÆ\r\n    uni.getLocation({\r\n        type: 'gcj02',\r\n        success: (res) => {\r\n            latitude.value = res.latitude\r\n            longitude.value = res.longitude\r\n            scale.value = 16 // ÊîæÂ§ßÂú∞Âõæ‰ª•Êõ¥Ê∏ÖÊô∞Âú∞ÊòæÁ§∫‰ΩçÁΩÆ\r\n            \r\n            uni.showToast({\r\n                title: 'ÂÆö‰ΩçÊàêÂäü',\r\n                icon: 'success',\r\n                duration: 1500\r\n            })\r\n        },\r\n        fail: (err) => {\r\n            console.error('ÂÆö‰ΩçÂ§±Ë¥•Ôºö', err)\r\n            // ÂΩìÁî®Êà∑ÊãíÁªùÊéàÊùÉÊó∂ÔºåÊèêÁ§∫ÊâìÂºÄËÆæÁΩÆ\r\n            uni.showModal({\r\n                title: 'ÊèêÁ§∫',\r\n                content: 'ÈúÄË¶ÅËé∑ÂèñÊÇ®ÁöÑÂú∞ÁêÜ‰ΩçÁΩÆÊâçËÉΩ‰ΩøÁî®Ê≠§ÂäüËÉΩ',\r\n                confirmText: 'ÂéªËÆæÁΩÆ',\r\n                success: (res) => {\r\n                    if (res.confirm) {\r\n                        // ÊâìÂºÄËÆæÁΩÆÈ°µÈù¢\r\n                        uni.openSetting()\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        complete: () => {\r\n            uni.hideLoading()\r\n        }\r\n    })\r\n}\r\n\r\n// ÁßªÂä®Âà∞ÂΩìÂâç‰ΩçÁΩÆ\r\nconst moveToCurrentLocation = () => {\r\n    getCurrentLocation()\r\n}\r\n\r\n// Â§ÑÁêÜÊêúÁ¥¢\r\nconst handleSearch = async (e) => {\r\n    if (!searchText.value) return\r\n    \r\n    // ËøôÈáåÈúÄË¶ÅÊé•ÂÖ•ËÖæËÆØÂú∞ÂõæÊêúÁ¥¢API\r\n    // Á§∫‰æã‰ª£Á†ÅÔºö\r\n    /*\r\n    try {\r\n        const result = await searchLocation(searchText.value)\r\n        if (result && result.length > 0) {\r\n            latitude.value = result[0].latitude\r\n            longitude.value = result[0].longitude\r\n            markers.value = [{\r\n                id: 1,\r\n                latitude: result[0].latitude,\r\n                longitude: result[0].longitude,\r\n                title: result[0].name\r\n            }]\r\n        }\r\n    } catch (error) {\r\n        uni.showToast({\r\n            title: 'ÊêúÁ¥¢Â§±Ë¥•',\r\n            icon: 'none'\r\n        })\r\n    }\r\n    */\r\n}\r\n\r\n// È°µÈù¢Âä†ËΩΩÊó∂Ëé∑Âèñ‰ΩçÁΩÆ\r\nonMounted(() => {\r\n    getCurrentLocation()\r\n})\r\n</script>\r\n\r\n<style>\r\n.container {\r\n    position: relative;\r\n    height: 100vh;\r\n    background-color: #fffbeb;\r\n}\r\n\r\n.search-container {\r\n    position: fixed;\r\n    top: var(--status-bar-height);\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 100;\r\n    padding: 20rpx;\r\n}\r\n\r\n.search-box {\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: #ffffff;\r\n    border-radius: 100rpx;\r\n    padding: 16rpx 30rpx;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.icon-search {\r\n    margin-right: 16rpx;\r\n    font-size: 32rpx;\r\n    color: #666;\r\n}\r\n\r\n.search-input {\r\n    flex: 1;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n}\r\n\r\n.map-container {\r\n    position: relative;\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n\r\n.map {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.location-btn {\r\n    position: fixed;\r\n    right: 30rpx;\r\n    bottom: 120rpx;\r\n    background-color: #ffffff;\r\n    width: 80rpx;\r\n    height: 80rpx;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n    z-index: 100;\r\n}\r\n\r\n.icon-location {\r\n    font-size: 40rpx;\r\n}\r\n\r\n/* Ê∑ªÂä†ÁÇπÂáªÊïàÊûú */\r\n.location-btn:active {\r\n    opacity: 0.8;\r\n    transform: scale(0.95);\r\n}\r\n</style>","import MiniProgramPage from 'D:/sitpÈ°πÁõÆ/miniprogram/bird-frontend/pages/MapPage/MapPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onMounted","MiniProgramPage"],"mappings":";;;;;AAuCA,MAAM,SAAS,MAAW;;;;AAE1B,UAAM,WAAWA,cAAG,IAAC,OAAO;AAC5B,UAAM,YAAYA,cAAG,IAAC,QAAQ;AAC9B,UAAM,QAAQA,cAAG,IAAC,EAAE;AACpB,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,UAAUA,cAAG,IAAC,EAAE;AAGtB,UAAM,qBAAqB,MAAM;AAE7BC,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MACf,CAAK;AAGDA,oBAAAA,MAAI,YAAY;AAAA,QACZ,MAAM;AAAA,QACN,SAAS,CAAC,QAAQ;AACd,mBAAS,QAAQ,IAAI;AACrB,oBAAU,QAAQ,IAAI;AACtB,gBAAM,QAAQ;AAEdA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAC1B,CAAa;AAAA,QACJ;AAAA,QACD,MAAM,CAAC,QAAQ;AACXA,wBAAAA,MAAA,MAAA,SAAA,mCAAc,SAAS,GAAG;AAE1BA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,SAAS,CAAC,QAAQ;AACd,kBAAI,IAAI,SAAS;AAEbA,8BAAAA,MAAI,YAAa;AAAA,cACpB;AAAA,YACJ;AAAA,UACjB,CAAa;AAAA,QACJ;AAAA,QACD,UAAU,MAAM;AACZA,wBAAAA,MAAI,YAAa;AAAA,QACpB;AAAA,MACT,CAAK;AAAA,IACL;AAGA,UAAM,wBAAwB,MAAM;AAChC,yBAAoB;AAAA,IACxB;AAGA,UAAM,eAAe,OAAO,MAAM;AAC9B,UAAI,CAAC,WAAW;AAAO;AAAA,IAwB3B;AAGAC,kBAAAA,UAAU,MAAM;AACZ,yBAAoB;AAAA,IACxB,CAAC;;;;;;;;;;;;;;;AC5HD,GAAG,WAAWC,SAAe;"}