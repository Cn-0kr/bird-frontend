{"version":3,"file":"MapPage.js","sources":["pages/MapPage/MapPage.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvTWFwUGFnZS9NYXBQYWdlLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <!-- Search Bar -->\n        <view class=\"search-container\">\n            <view class=\"search-box\">\n                <text class=\"icon-search\">üîç</text>\n                <input\n                    type=\"text\"\n                    class=\"search-input\"\n                    placeholder=\"ÊêúÁ¥¢ÁõÆÁöÑÂú∞/È∏üÁ±ªÂêçÁß∞\"\n                    v-model=\"searchText\"\n                    @confirm=\"handleSearch\"\n                />\n                <view class=\"search-btn\" @tap=\"handleSearch\" v-if=\"searchText\">\n                    <text class=\"search-btn-text\">ÊêúÁ¥¢</text>\n                </view>\n            </view>\n        </view>\n\n        <!-- Map Container -->\n        <view class=\"map-container\">\n            <map\n                class=\"map\"\n                :latitude=\"latitude\"\n                :longitude=\"longitude\"\n                :markers=\"markers\"\n                :polyline=\"polyline\"\n                :scale=\"scale\"\n                show-location\n                @markertap=\"onMarkerTap\"\n                @regionchange=\"onRegionChange\"\n            ></map>\n\n            <!-- Control Buttons -->\n            <view class=\"control-buttons\">\n                <!-- My Location Button -->\n                <view class=\"control-btn location-btn\" @tap=\"moveToCurrentLocation\">\n                    <text class=\"icon-location\">üìç</text>\n                </view>\n                \n                <!-- Zoom In Button -->\n                <view class=\"control-btn zoom-btn\" @tap=\"zoomIn\">\n                    <text class=\"zoom-icon\">+</text>\n                </view>\n                \n                <!-- Zoom Out Button -->\n                <view class=\"control-btn zoom-btn\" @tap=\"zoomOut\">\n                    <text class=\"zoom-icon\">-</text>\n                </view>\n                \n                <!-- Layer Switch Button -->\n                <view class=\"control-btn layer-btn\" @tap=\"switchMapLayer\">\n                    <text class=\"layer-icon\">üó∫Ô∏è</text>\n                </view>\n            </view>\n            \n            <!-- Info Card (ÊòæÁ§∫ÁÇπÂáªÂêéÁöÑÂú∞ÁÇπ‰ø°ÊÅØ) -->\n            <view class=\"info-card\" v-if=\"showInfoCard\" @tap.stop=\"closeInfoCard\">\n                <view class=\"info-card-inner\" @tap.stop=\"\">\n                    <view class=\"info-card-header\">\n                        <view class=\"info-card-close\" @tap=\"closeInfoCard\">√ó</view>\n                        <image \n                            class=\"info-card-image\" \n                            :src=\"getOSSUrl(selectedLocation.image, 'large')\" \n                            mode=\"aspectFill\"\n                            @error=\"onImageError\"\n                        ></image>\n                        <view class=\"info-card-badge\">{{selectedLocation.category}}</view>\n                    </view>\n                    \n                    <view class=\"info-card-content\">\n                        <view class=\"info-card-title\">{{selectedLocation.name}}</view>\n                        <view class=\"info-card-description\">{{selectedLocation.description}}</view>\n                        \n                        <!-- È∏üÁ±ªËßÇÊµãÁªüËÆ° -->\n                        <view class=\"bird-stats\" v-if=\"selectedLocation.birdStats\">\n                            <view class=\"stats-title\">üìä ËßÇÊµãÁªüËÆ°</view>\n                            <view class=\"stats-row\">\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.species}}</text>\n                                    <text class=\"stat-label\">È∏üÁßçÊï∞Èáè</text>\n                                </view>\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.observations}}</text>\n                                    <text class=\"stat-label\">ËßÇÊµãÊ¨°Êï∞</text>\n                                </view>\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.rareSpecies}}</text>\n                                    <text class=\"stat-label\">ÁèçÁ®ÄÈ∏üÁßç</text>\n                                </view>\n                            </view>\n                        </view>\n                        \n                        <!-- ÊúÄ‰Ω≥ËßÇÈ∏üÊó∂Èó¥ -->\n                        <view class=\"best-time\" v-if=\"selectedLocation.bestTime\">\n                            <view class=\"time-title\">‚è∞ ÊúÄ‰Ω≥ËßÇÈ∏üÊó∂Èó¥</view>\n                            <view class=\"time-content\">{{selectedLocation.bestTime}}</view>\n                        </view>\n                        \n                        <!-- Â∏∏ËßÅÈ∏üÁ±ªÈ¢ÑËßà -->\n                        <view class=\"common-birds\" v-if=\"selectedLocation.commonBirds\">\n                            <view class=\"birds-title\">üê¶ Â∏∏ËßÅÈ∏üÁ±ª</view>\n                            <view class=\"birds-list\">\n                                <view \n                                    v-for=\"bird in selectedLocation.commonBirds\" \n                                    :key=\"bird.id\"\n                                    class=\"bird-tag\"\n                                >\n                                    {{bird.name}}\n                                </view>\n                            </view>\n                        </view>\n                        \n                        <!-- Êìç‰ΩúÊåâÈíÆ -->\n                        <view class=\"action-buttons\">\n                            <button class=\"action-btn details-btn\" @tap=\"viewDetails\">\n                                <text class=\"btn-icon\">üìñ</text>\n                                <text>Êü•ÁúãËØ¶ÊÉÖ</text>\n                            </button>\n                            <button class=\"action-btn navigate-btn\" @tap=\"navigateToLocation\">\n                                <text class=\"btn-icon\">üß≠</text>\n                                <text>ÂØºËà™ÂâçÂæÄ</text>\n                            </button>\n                            <button class=\"action-btn share-btn\" @tap=\"shareLocation\">\n                                <text class=\"btn-icon\">üì§</text>\n                                <text>ÂàÜ‰∫´‰ΩçÁΩÆ</text>\n                            </button>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </view>\n        \n        <!-- Loading Overlay -->\n        <view class=\"loading-overlay\" v-if=\"isLoading\">\n            <view class=\"loading-content\">\n                <view class=\"loading-spinner\"></view>\n                <text class=\"loading-text\">{{loadingText}}</text>\n            </view>\n        </view>\n        \n        <!-- Âú∞ÂõæÂõæ‰æã -->\n        <view class=\"map-legend\" v-if=\"showLegend\">\n            <view class=\"legend-header\">\n                <text class=\"legend-title\">üó∫Ô∏è Âú∞ÂõæÂõæ‰æã</text>\n                <text class=\"legend-close\" @tap=\"showLegend = false\">√ó</text>\n            </view>\n            <view class=\"legend-items\">\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-wetland.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">ÊπøÂú∞ÂÖ¨Âõ≠</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-park.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">ÂüéÂ∏ÇÂÖ¨Âõ≠</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-river.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">Ê≤≥ÈÅìÊπøÂú∞</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-residential.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">Â±ÖÊ∞ëÂå∫</text>\n                </view>\n            </view>\n        </view>\n        \n        <!-- Ê∑ªÂä†Â∫ïÈÉ®ÂØºËà™Ê†è -->\n        <tab-bar></tab-bar>\n    </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport TabBar from '@/components/tabbar.vue';\n\n// ========== OSSÈÖçÁΩÆ ==========\nconst ossConfig = {\n  baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com'\n};\n\n// ========== OSSÂ∑•ÂÖ∑ÊñπÊ≥ï ==========\n/**\n * Ëé∑ÂèñOSSÂõæÁâáURL\n * @param {string} filename - Êñá‰ª∂Âêç\n * @param {string} size - Â∞∫ÂØ∏Á±ªÂûã\n * @returns {string} ÂÆåÊï¥ÁöÑOSS URL\n */\nconst getOSSUrl = (filename, size = 'medium') => {\n  if (!filename) return '';\n  \n  // Á°Æ‰øùÊñá‰ª∂Âêç‰∏ç‰ª•ÊñúÊù†ÂºÄÂ§¥\n  const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename;\n  \n  // Ê†πÊçÆÂ∞∫ÂØ∏Á±ªÂûãËÆæÁΩÆ‰∏çÂêåÁöÑÂ§ÑÁêÜÂèÇÊï∞\n  let params = '';\n  switch(size) {\n    case 'icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90/format,webp';\n      break;\n    case 'small':\n      params = '?x-oss-process=image/resize,m_lfit,w_100,h_100/quality,q_90/format,webp';\n      break;\n    case 'medium':\n      params = '?x-oss-process=image/resize,m_lfit,w_200,h_150/quality,q_90/format,webp';\n      break;\n    case 'large':\n      params = '?x-oss-process=image/resize,m_lfit,w_400,h_250/quality,q_90/format,webp';\n      break;\n    case 'marker':\n      params = '?x-oss-process=image/resize,m_lfit,w_40,h_40/quality,q_90/format,webp';\n      break;\n    default:\n      params = '?x-oss-process=image/resize,m_lfit,w_200,h_150/quality,q_90/format,webp';\n  }\n  \n  return `${ossConfig.baseUrl}/${cleanFilename}${params}`;\n};\n\n// ËÖæËÆØÂú∞ÂõæAPIÂØÜÈí•\nconst TENCENT_MAP_KEY = '2VEBZ-H2SW5-URJIL-I26ZE-2EB2E-BOF27';\n\n// ========== ÂìçÂ∫îÂºèÁä∂ÊÄÅ ==========\nconst latitude = ref(31.2304)  // ÈªòËÆ§Á∫¨Â∫¶Ôºà‰∏äÊµ∑Ôºâ\nconst longitude = ref(121.4737)  // ÈªòËÆ§ÁªèÂ∫¶Ôºà‰∏äÊµ∑Ôºâ\nconst scale = ref(14)  // ÈªòËÆ§Áº©ÊîæÁ∫ßÂà´\nconst searchText = ref('')\nconst markers = ref([])\nconst polyline = ref([]) // Áî®‰∫éÊòæÁ§∫Âå∫ÂüüËæπÁïå\n\n// UIÁä∂ÊÄÅ\nconst showInfoCard = ref(false)\nconst selectedLocation = ref({})\nconst isLoading = ref(false)\nconst loadingText = ref('Âä†ËΩΩ‰∏≠...')\nconst showLegend = ref(false)\nconst currentMapLayer = ref('standard') // standard, satellite\n\n// ========== MockÊï∞ÊçÆ - È∏üÁ±ªËßÇÊµãÁÇπ ==========\nconst birdLocations = ref([\n    {\n        id: 1,\n        name: 'ÂòâÂÆöÁ¥´Ëó§Âõ≠',\n        category: 'ÊπøÂú∞ÂÖ¨Âõ≠',\n        latitude: 31.2354,\n        longitude: 121.4617,\n        image: 'static/images/locations/jiading-wisteria.jpg',\n        description: 'ÂòâÂÆöÁ¥´Ëó§Âõ≠ÊòØ‰∏äÊµ∑Â∏ÇËëóÂêçÁöÑËßÇÈ∏üÂú∞ÁÇπÔºåÊã•Êúâ‰∏∞ÂØåÁöÑÊπøÂú∞ÁîüÊÄÅÁ≥ªÁªü„ÄÇËøôÈáåÂ∏∏Âπ¥Êúâ20Â§öÁßçÊ∞¥È∏üÊ†ñÊÅØÔºåÊòØËßÇÊµãÂÄôÈ∏üËøÅÂæôÁöÑÁªù‰Ω≥Âú∞ÁÇπ„ÄÇÂõ≠ÂÜÖÊúâ‰∏ìÈó®ÁöÑËßÇÈ∏üÂπ≥Âè∞ÔºåÊØèÂπ¥Êò•Áßã‰∏§Â≠£ÊòØÊúÄ‰Ω≥ËßÇÈ∏üÊó∂Èó¥„ÄÇ',\n        birdStats: {\n            species: 42,\n            observations: 186,\n            rareSpecies: 3\n        },\n        bestTime: 'Êò•Áßã‰∏§Â≠£Ôºà3-5ÊúàÔºå9-11ÊúàÔºâÊ∏ÖÊô®5-8ÁÇπÔºåÂÇçÊôö4-6ÁÇπ',\n        commonBirds: [\n            { id: 1, name: 'ÁôΩÈπ≠' },\n            { id: 2, name: 'Â§úÈπ≠' },\n            { id: 3, name: 'Â∞è‰¥ô‰¥ò' },\n            { id: 4, name: 'ÁªøÂ§¥È∏≠' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 2,\n        name: 'Êñ∞ÂüéÂÖ¨Âõ≠',\n        category: 'ÂüéÂ∏ÇÂÖ¨Âõ≠',\n        latitude: 31.2404,\n        longitude: 121.4837,\n        image: 'static/images/locations/xincheng-park.jpg',\n        description: 'Êñ∞ÂüéÂÖ¨Âõ≠ÊòØÂ∏ÇÂå∫ÂÜÖÈöæÂæóÁöÑÈ∏üÁ±ªÊ†ñÊÅØÂú∞ÔºåÂÖ¨Âõ≠ÂÜÖÊúâÂ§öÁßç‰πîÊú®ÂíåÁÅåÊú®Ôºå‰∏∫Â∞èÂûãÈ∏üÁ±ªÊèê‰æõ‰∫ÜËâØÂ•ΩÁöÑÊ†ñÊÅØÁéØÂ¢É„ÄÇËøôÈáåÂ∏∏ËßÅÈ∫ªÈõÄ„ÄÅÁôΩÂ§¥Èπé„ÄÅÈªëÂ∞æËú°Âò¥ÈõÄÁ≠âÈ∏üÁ±ªÔºåÊòØÂüéÂ∏Ç‰∏≠ËΩªÊùæËßÇÈ∏üÁöÑÂ•ΩÂéªÂ§Ñ„ÄÇ',\n        birdStats: {\n            species: 18,\n            observations: 94,\n            rareSpecies: 0\n        },\n        bestTime: 'ÂÖ®Âπ¥ÈÄÇÂÆúÔºåÊó©Êô®6-9ÁÇπÊúÄ‰Ω≥',\n        commonBirds: [\n            { id: 5, name: 'ÁôΩÂ§¥Èπé' },\n            { id: 6, name: 'È∫ªÈõÄ' },\n            { id: 7, name: '‰πåÈ∏´' },\n            { id: 8, name: 'Áè†È¢àÊñëÈ∏†' }\n        ],\n        markerIcon: 'static/icons/marker-park.png'\n    },\n    {\n        id: 3,\n        name: 'ÁéØÂüéÊ≤≥ÁªøÂ∏¶',\n        category: 'Ê≤≥ÈÅìÊπøÂú∞',\n        latitude: 31.2284,\n        longitude: 121.4527,\n        image: 'static/images/locations/huancheng-river.jpg',\n        description: 'ÁéØÂüéÊ≤≥ÁªøÂ∏¶Ê≤øÁ∫øÊ†ΩÁßç‰∫ÜÂ§ßÈáèÊ∞¥ÁîüÊ§çÁâ©ÔºåÂê∏Âºï‰∫ÜÂ§öÁßçÊ∞¥È∏üÂâçÊù•ËßÖÈ£üÂíåÊ†ñÊÅØ„ÄÇÊ≤≥ËæπËÆæÊúâÂ§ö‰∏™ËßÇÈ∏üÁÇπÔºåÂ∏∏ËßÅÈ∏üÁ±ªÂåÖÊã¨ÁôΩÈπ≠„ÄÅÂ§úÈπ≠„ÄÅÁªøÂ§¥È∏≠Á≠â„ÄÇËøôÈáåÁéØÂ¢ÉÂπΩÈùôÔºåÊòØËßÇÈ∏üÁà±Â•ΩËÄÖÁöÑÁßòÂØÜÂ§©Â†Ç„ÄÇ',\n        birdStats: {\n            species: 26,\n            observations: 132,\n            rareSpecies: 1\n        },\n        bestTime: 'Êò•Â§èÂ≠£ËäÇÔºà4-8ÊúàÔºâÊó©ÊôöÊó∂ÂàÜ',\n        commonBirds: [\n            { id: 9, name: 'ÁôΩÈπ≠' },\n            { id: 10, name: 'ÁªøÂ§¥È∏≠' },\n            { id: 11, name: 'Áø†È∏ü' },\n            { id: 12, name: 'ÈªëÊ∞¥È∏°' }\n        ],\n        markerIcon: 'static/icons/marker-river.png'\n    },\n    {\n        id: 4,\n        name: 'ÂòâÂÆùËä±Âõ≠Âà´Â¢Ö',\n        category: 'Â±ÖÊ∞ëÂå∫',\n        latitude: 31.2234,\n        longitude: 121.4637,\n        image: 'static/images/locations/jiabao-garden.jpg',\n        description: 'ÂòâÂÆùËä±Âõ≠Âà´Â¢ÖÂå∫ÂÜÖÁªøÂåñËâØÂ•ΩÔºåÁßçÊ§ç‰∫ÜÂ§öÁßçÊûúÊ†ëÂíåËä±ÂçâÔºåÂê∏Âºï‰∫ÜÂæàÂ§öÂ∞èÂûãÈ∏üÁ±ªÂâçÊù•Á≠ëÂ∑¢„ÄÇËøôÈáåÂèØ‰ª•ËßÇÂØüÂà∞Êü≥Ëé∫„ÄÅÁª£ÁúºÈ∏üÁ≠âÂ∞èÂûãÈ∏üÁ±ªÔºåÊòØÂüéÂ∏ÇËßÇÈ∏üÁöÑÂ•ΩÂéªÂ§Ñ„ÄÇÊ≠§Â§Ñ‰∏∫Â±ÖÊ∞ëÂå∫ÔºåÂèÇËßÇÊó∂ËØ∑‰øùÊåÅÂÆâÈùô„ÄÇ',\n        birdStats: {\n            species: 13,\n            observations: 67,\n            rareSpecies: 0\n        },\n        bestTime: 'Êò•Â≠£Ôºà3-5ÊúàÔºâÊ∏ÖÊô®Êó∂ÂàÜ',\n        commonBirds: [\n            { id: 13, name: 'Êü≥Ëé∫' },\n            { id: 14, name: 'Áª£ÁúºÈ∏ü' },\n            { id: 15, name: 'Á∫¢Âò¥ËìùÈπä' },\n            { id: 16, name: 'ÁôΩÂ§¥Èπé' }\n        ],\n        markerIcon: 'static/icons/marker-residential.png'\n    },\n    {\n        id: 5,\n        name: 'Ê¢¶Ëä±Êπñ',\n        category: 'ÊπñÊ≥äÊπøÂú∞',\n        latitude: 31.2454,\n        longitude: 121.4557,\n        image: 'static/images/locations/menghua-lake.jpg',\n        description: 'Ê¢¶Ëä±ÊπñÊòØ‰∏Ä‰∏™‰∫∫Â∑•ÊπñÊ≥äÔºåÂë®Âõ¥Ê§çË¢´ËåÇÁõõÔºåÊπñÈù¢ÂºÄÈòîÔºåÊòØÂ§öÁßçÊ∞¥È∏üÂíåÊ∂âÁ¶ΩÁöÑÊ†ñÊÅØÂú∞„ÄÇËøôÈáåÂèØ‰ª•ËßÇÂØüÂà∞ÁôΩÈπ≠„ÄÅËãçÈπ≠„ÄÅÂ∞è‰¥ô‰¥òÁ≠âÊ∞¥È∏üÔºå‰ª•ÂèäÂ§öÁßçÈõÅÈ∏≠Á±ª„ÄÇÊπñËæπÊúâ‰∏ìÈó®ÁöÑËßÇÈ∏üÂ±ãÂíåÊ†àÈÅìÔºåÈÄÇÂêàÈïøÊó∂Èó¥ËßÇÈ∏ü„ÄÇ',\n        birdStats: {\n            species: 35,\n            observations: 158,\n            rareSpecies: 2\n        },\n        bestTime: 'ÂÖ®Âπ¥ÈÄÇÂÆúÔºåËøÅÂæôÂ≠£ËäÇÔºàÊò•ÁßãÔºâÊúÄ‰Ω≥',\n        commonBirds: [\n            { id: 17, name: 'ËãçÈπ≠' },\n            { id: 18, name: 'Â∞è‰¥ô‰¥ò' },\n            { id: 19, name: 'Ëµ§ËÜÄÈ∏≠' },\n            { id: 20, name: 'ÁôΩÈ™®È°∂' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 6,\n        name: 'ÂûÉÂúæÂ°´ÂüãÂú∫ÊπøÂú∞',\n        category: 'ÊÅ¢Â§çÊÄßÊπøÂú∞',\n        latitude: 31.2194,\n        longitude: 121.4867,\n        image: 'static/images/locations/landfill-wetland.jpg',\n        description: 'Ëøô‰∏™Âå∫ÂüüÂéüÊòØÂûÉÂúæÂ°´ÂüãÂú∫ÔºåÂêéÁªèËøáÁîüÊÄÅ‰øÆÂ§çÔºåÁé∞Â∑≤Êàê‰∏∫ÈáçË¶ÅÁöÑÈ∏üÁ±ªÊ†ñÊÅØÂú∞„ÄÇÁî±‰∫éÊòÜËô´ÂíåÂ∞èÂûãÂä®Áâ©‰∏∞ÂØåÔºåÂê∏Âºï‰∫ÜÂ§ßÈáèÁåõÁ¶ΩÂíåÊ∂âÁ¶Ω„ÄÇËøôÈáåÂ∏∏ËßÅÁåõÁ¶ΩÂåÖÊã¨Á∫¢Èöº„ÄÅÊôÆÈÄöÈµüÁ≠âÔºåÊòØËßÇÂØüÁåõÁ¶ΩÁöÑÁêÜÊÉ≥Âú∫ÊâÄ„ÄÇ',\n        birdStats: {\n            species: 22,\n            observations: 76,\n            rareSpecies: 2\n        },\n        bestTime: 'ÁßãÂÜ¨Â≠£ËäÇÔºà10-2ÊúàÔºâ‰∏≠ÂçàÊó∂ÂàÜ',\n        commonBirds: [\n            { id: 21, name: 'Á∫¢Èöº' },\n            { id: 22, name: 'ÊôÆÈÄöÈµü' },\n            { id: 23, name: 'ÁÅ∞‰ºØÂä≥' },\n            { id: 24, name: 'Áî∞Èπ®' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 7,\n        name: 'ÁªøÂú∞ÂòâÂ∞öÂõΩÈôÖÂπøÂú∫',\n        category: 'ÂüéÂ∏ÇÁªøÂú∞',\n        latitude: 31.2284,\n        longitude: 121.4987,\n        image: 'static/images/locations/jiashang-plaza.jpg',\n        description: 'ÁªøÂú∞ÂòâÂ∞öÂõΩÈôÖÂπøÂú∫Âë®ËæπÊúâÁ≤æÂøÉËÆæËÆ°ÁöÑÂüéÂ∏ÇÁªøÂú∞ÔºåÁßçÊ§ç‰∫ÜÂ§öÁßç‰π°ÂúüÊ†ëÁßçÔºå‰∏∫È∏üÁ±ªÊèê‰æõ‰∫ÜËâØÂ•ΩÁöÑÊ†ñÊÅØÁéØÂ¢É„ÄÇËøôÈáåÂ∏∏ËßÅÈ∏üÁ±ªÂåÖÊã¨Áè†È¢àÊñëÈ∏†„ÄÅÊ†ëÈ∫ªÈõÄ„ÄÅÁôΩÂ§¥ÈπéÁ≠âÔºåÈÄÇÂêàÊó©Êô®ÊàñÂÇçÊôöÂâçÊù•ËßÇÈ∏ü„ÄÇ',\n        birdStats: {\n            species: 16,\n            observations: 83,\n            rareSpecies: 0\n        },\n        bestTime: 'ÂÖ®Âπ¥ÈÄÇÂÆúÔºåÊó©Êô®ÂíåÂÇçÊôöÊúÄ‰Ω≥',\n        commonBirds: [\n            { id: 25, name: 'Áè†È¢àÊñëÈ∏†' },\n            { id: 26, name: 'Ê†ëÈ∫ªÈõÄ' },\n            { id: 27, name: 'ÁôΩÂ§¥Èπé' },\n            { id: 28, name: 'ÂÖ´Âì•' }\n        ],\n        markerIcon: 'static/icons/marker-park.png'\n    }\n]);\n\n// ========== ËÆ°ÁÆóÂ±ûÊÄß ==========\nconst totalSpecies = computed(() => {\n    return birdLocations.value.reduce((total, location) => {\n        return total + location.birdStats.species;\n    }, 0);\n});\n\nconst totalObservations = computed(() => {\n    return birdLocations.value.reduce((total, location) => {\n        return total + location.birdStats.observations;\n    }, 0);\n});\n\n// ========== ÊùÉÈôêÂíåÂÆö‰ΩçÂäüËÉΩ ==========\n/**\n * Ê£ÄÊü•Âπ∂Ëé∑Âèñ‰ΩçÁΩÆÊùÉÈôê\n */\nconst checkAndRequestLocationPermission = () => {\n    return new Promise((resolve, reject) => {\n        uni.getSetting({\n            success: (res) => {\n                if (res.authSetting['scope.userLocation'] === false) {\n                    // Áî®Êà∑Â∑≤ÊãíÁªùËøáÊéàÊùÉÔºåÊòæÁ§∫ÂºïÂØºÂºπÁ™ó\n                    uni.showModal({\n                        title: 'ÈúÄË¶Å‰ΩçÁΩÆÊùÉÈôê',\n                        content: '‰∏∫‰∫ÜÊèê‰æõÂáÜÁ°ÆÁöÑÂú∞ÂõæÊúçÂä°ÔºåÈúÄË¶ÅËé∑ÂèñÊÇ®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂÖÅËÆ∏\"‰∫ëÈõÄËß£Á†Å\"ËÆøÈóÆÊÇ®ÁöÑ‰ΩçÁΩÆ„ÄÇ',\n                        confirmText: 'ÂéªËÆæÁΩÆ',\n                        cancelText: 'ÂèñÊ∂à',\n                        success: (modalRes) => {\n                            if (modalRes.confirm) {\n                                // ÊâìÂºÄËÆæÁΩÆÈ°µÈù¢\n                                uni.openSetting({\n                                    success: (settingRes) => {\n                                        if (settingRes.authSetting['scope.userLocation']) {\n                                            resolve();\n                                        } else {\n                                            reject(new Error('Êú™Ëé∑Âæó‰ΩçÁΩÆÊùÉÈôê'));\n                                        }\n                                    }\n                                });\n                            } else {\n                                reject(new Error('Áî®Êà∑ÂèñÊ∂àÊéàÊùÉ'));\n                            }\n                        }\n                    });\n                } else if (res.authSetting['scope.userLocation'] === true) {\n                    // Áî®Êà∑Â∑≤ÊéàÊùÉ\n                    resolve();\n                } else {\n                    // È¶ñÊ¨°ËØ∑Ê±ÇÊéàÊùÉ\n                    uni.authorize({\n                        scope: 'scope.userLocation',\n                        success: () => {\n                            resolve();\n                        },\n                        fail: (err) => {\n                            reject(err);\n                        }\n                    });\n                }\n            },\n            fail: (err) => {\n                reject(err);\n            }\n        });\n    });\n};\n\n/**\n * Ëé∑ÂèñÂΩìÂâç‰ΩçÁΩÆ\n */\nconst getCurrentLocation = () => {\n    isLoading.value = true;\n    loadingText.value = 'ÂÆö‰Ωç‰∏≠...';\n\n    // ÂÖàÊ£ÄÊü•ÊùÉÈôê\n    checkAndRequestLocationPermission()\n        .then(() => {\n            // Ëé∑Âèñ‰ΩçÁΩÆ\n            uni.getLocation({\n                type: 'gcj02',\n                success: (res) => {\n                    latitude.value = res.latitude;\n                    longitude.value = res.longitude;\n                    scale.value = 16; // ÊîæÂ§ßÂú∞Âõæ‰ª•Êõ¥Ê∏ÖÊô∞Âú∞ÊòæÁ§∫‰ΩçÁΩÆ\n\n                    uni.showToast({\n                        title: 'ÂÆö‰ΩçÊàêÂäü',\n                        icon: 'success',\n                        duration: 1500\n                    });\n\n                    // Âä†ËΩΩÈ∏üÁ±ªËßÇÊµãÁÇπÊï∞ÊçÆ\n                    loadBirdLocations();\n                },\n                fail: (err) => {\n                    console.error('Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•Ôºö', err);\n                    uni.showToast({\n                        title: 'Ëé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•',\n                        icon: 'none'\n                    });\n                    \n                    // Âç≥‰ΩøËé∑Âèñ‰ΩçÁΩÆÂ§±Ë¥•Ôºå‰πüÂä†ËΩΩÈ∏üÁ±ªËßÇÊµãÁÇπÊï∞ÊçÆ\n                    loadBirdLocations();\n                },\n                complete: () => {\n                    isLoading.value = false;\n                }\n            });\n        })\n        .catch((err) => {\n            console.error('‰ΩçÁΩÆÊùÉÈôêÈîôËØØÔºö', err);\n            isLoading.value = false;\n            \n            // ‰ΩøÁî®ÈªòËÆ§‰ΩçÁΩÆÂä†ËΩΩÊï∞ÊçÆ\n            loadBirdLocations();\n        });\n};\n\n/**\n * ÁßªÂä®Âà∞ÂΩìÂâç‰ΩçÁΩÆ\n */\nconst moveToCurrentLocation = () => {\n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    getCurrentLocation();\n};\n\n// ========== ÊêúÁ¥¢ÂäüËÉΩ ==========\n/**\n * ‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIËøõË°åÂú∞ÁÇπÊêúÁ¥¢\n */\nconst searchLocation = (keyword) => {\n    return new Promise((resolve, reject) => {\n        uni.request({\n            url: `https://apis.map.qq.com/ws/place/v1/search`,\n            method: 'GET',\n            data: {\n                key: TENCENT_MAP_KEY,\n                keyword: keyword,\n                boundary: 'nearby(' + latitude.value + ',' + longitude.value + ',10000)', // ÊêúÁ¥¢ËåÉÂõ¥10km\n                page_size: 10,\n                page_index: 1\n            },\n            success: (res) => {\n                if (res.data && res.data.status === 0 && res.data.data.length > 0) {\n                    resolve(res.data.data);\n                } else {\n                    reject(new Error('Êú™ÊâæÂà∞Áõ∏ÂÖ≥Âú∞ÁÇπ'));\n                }\n            },\n            fail: (err) => {\n                reject(err);\n            }\n        });\n    });\n};\n\n/**\n * Â§ÑÁêÜÊêúÁ¥¢\n */\nconst handleSearch = async () => {\n    if (!searchText.value.trim()) {\n        uni.showToast({\n            title: 'ËØ∑ËæìÂÖ•ÊêúÁ¥¢ÂÜÖÂÆπ',\n            icon: 'none'\n        });\n        return;\n    }\n    \n    isLoading.value = true;\n    loadingText.value = 'ÊêúÁ¥¢‰∏≠...';\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    try {\n        // È¶ñÂÖàÂú®Êú¨Âú∞Êï∞ÊçÆ‰∏≠ÊêúÁ¥¢\n        const localResults = birdLocations.value.filter(location => \n            location.name.includes(searchText.value) || \n            location.category.includes(searchText.value) ||\n            location.description.includes(searchText.value) ||\n            location.commonBirds.some(bird => bird.name.includes(searchText.value))\n        );\n        \n        if (localResults.length > 0) {\n            // Â¶ÇÊûúÊâæÂà∞Êú¨Âú∞ÁªìÊûúÔºåÁßªÂä®Âà∞Á¨¨‰∏Ä‰∏™ÁªìÊûú\n            const firstResult = localResults[0];\n            latitude.value = firstResult.latitude;\n            longitude.value = firstResult.longitude;\n            scale.value = 16;\n            \n            // È´ò‰∫ÆÊêúÁ¥¢ÁªìÊûú\n            highlightSearchResults(localResults);\n            \n            uni.showToast({\n                title: `ÊâæÂà∞${localResults.length}‰∏™Áõ∏ÂÖ≥Âú∞ÁÇπ`,\n                icon: 'success'\n            });\n        } else {\n            // Â¶ÇÊûúÊú¨Âú∞Ê≤°ÊúâÁªìÊûúÔºå‰ΩøÁî®ËÖæËÆØÂú∞ÂõæAPIÊêúÁ¥¢\n            const result = await searchLocation(searchText.value);\n            if (result && result.length > 0) {\n                // Êõ¥Êñ∞Âú∞Âõæ‰∏≠ÂøÉÁÇπ\n                latitude.value = result[0].location.lat;\n                longitude.value = result[0].location.lng;\n                \n                // Ê∑ªÂä†ÊêúÁ¥¢ÁªìÊûúÊ†áËÆ∞\n                const searchMarker = {\n                    id: 999,\n                    latitude: result[0].location.lat,\n                    longitude: result[0].location.lng,\n                    title: result[0].title,\n                    iconPath: getOSSUrl('static/icons/marker-search.png', 'marker'),\n                    width: 40,\n                    height: 40,\n                    callout: {\n                        content: result[0].title,\n                        color: '#000000',\n                        fontSize: 12,\n                        borderRadius: 5,\n                        bgColor: '#ffffff',\n                        padding: 5,\n                        display: 'ALWAYS'\n                    }\n                };\n                \n                // ‰øùÁïôÊï∞ÊçÆÂ∫ìÂú∞ÁÇπÊ†áËÆ∞Âπ∂Ê∑ªÂä†ÊêúÁ¥¢ÁªìÊûúÊ†áËÆ∞\n                const dbMarkers = markers.value.filter(marker => marker.id !== 999);\n                markers.value = [...dbMarkers, searchMarker];\n                \n                scale.value = 16;\n                \n                uni.showToast({\n                    title: 'ÊêúÁ¥¢ÊàêÂäü',\n                    icon: 'success'\n                });\n            }\n        }\n    } catch (error) {\n        console.error('ÊêúÁ¥¢Â§±Ë¥•:', error);\n        uni.showToast({\n            title: 'ÊêúÁ¥¢Â§±Ë¥•: ' + error.message,\n            icon: 'none'\n        });\n    } finally {\n        isLoading.value = false;\n    }\n};\n\n/**\n * È´ò‰∫ÆÊêúÁ¥¢ÁªìÊûú\n */\nconst highlightSearchResults = (results) => {\n    // Êõ¥Êñ∞Ê†áËÆ∞ÔºåÈ´ò‰∫ÆÊêúÁ¥¢ÁªìÊûú\n    markers.value = birdLocations.value.map(location => {\n        const isHighlighted = results.some(result => result.id === location.id);\n        return {\n            id: location.id,\n            latitude: location.latitude,\n            longitude: location.longitude,\n            title: location.name,\n            iconPath: getOSSUrl(\n                isHighlighted ? 'static/icons/marker-highlighted.png' : location.markerIcon, \n                'marker'\n            ),\n            width: isHighlighted ? 50 : 40,\n            height: isHighlighted ? 50 : 40,\n            callout: {\n                content: location.name,\n                color: isHighlighted ? '#ff6b6b' : '#000000',\n                fontSize: isHighlighted ? 14 : 12,\n                borderRadius: 5,\n                bgColor: isHighlighted ? '#fff5f5' : '#ffffff',\n                padding: 5,\n                display: 'ALWAYS'\n            }\n        };\n    });\n};\n\n// ========== Âú∞ÂõæÊéßÂà∂ÂäüËÉΩ ==========\n/**\n * ÊîæÂ§ßÂú∞Âõæ\n */\nconst zoomIn = () => {\n    if (scale.value < 20) {\n        scale.value += 2;\n        \n        // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n        try {\n            uni.vibrateShort({\n                type: 'light'\n            });\n        } catch (error) {\n            console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n        }\n    }\n};\n\n/**\n * Áº©Â∞èÂú∞Âõæ\n */\nconst zoomOut = () => {\n    if (scale.value > 5) {\n        scale.value -= 2;\n        \n        // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n        try {\n            uni.vibrateShort({\n                type: 'light'\n            });\n        } catch (error) {\n            console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n        }\n    }\n};\n\n/**\n * ÂàáÊç¢Âú∞ÂõæÂõæÂ±Ç\n */\nconst switchMapLayer = () => {\n    currentMapLayer.value = currentMapLayer.value === 'standard' ? 'satellite' : 'standard';\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    uni.showToast({\n        title: currentMapLayer.value === 'standard' ? 'Ê†áÂáÜÂú∞Âõæ' : 'Âç´ÊòüÂú∞Âõæ',\n        icon: 'none',\n        duration: 1000\n    });\n};\n\n/**\n * Âú∞ÂõæÂå∫ÂüüÂèòÂåñÂ§ÑÁêÜ\n */\nconst onRegionChange = (e) => {\n    if (e.type === 'end') {\n        // Âå∫ÂüüÂèòÂåñÁªìÊùüÔºåÂèØ‰ª•Âú®ËøôÈáåÂÅö‰∏Ä‰∫õÂ§ÑÁêÜ\n        console.log('Âú∞ÂõæÂå∫ÂüüÂèòÂåñ:', e);\n    }\n};\n\n// ========== Êï∞ÊçÆÂä†ËΩΩÂäüËÉΩ ==========\n/**\n * Âä†ËΩΩÈ∏üÁ±ªËßÇÊµãÁÇπÊï∞ÊçÆ\n */\nconst loadBirdLocations = () => {\n    isLoading.value = true;\n    loadingText.value = 'Âä†ËΩΩËßÇÊµãÁÇπÊï∞ÊçÆ...';\n    \n    try {\n        // Ê®°ÊãüAPIÂª∂Ëøü\n        setTimeout(() => {\n            const locationMarkers = birdLocations.value.map(loc => ({\n                id: loc.id,\n                latitude: loc.latitude,\n                longitude: loc.longitude,\n                title: loc.name,\n                iconPath: getOSSUrl(loc.markerIcon, 'marker'),\n                width: 40,\n                height: 40,\n                callout: {\n                    content: loc.name,\n                    color: '#000000',\n                    fontSize: 12,\n                    borderRadius: 5,\n                    bgColor: '#ffffff',\n                    padding: 5,\n                    display: 'ALWAYS'\n                }\n            }));\n            \n            // Êõ¥Êñ∞Ê†áËÆ∞\n            markers.value = locationMarkers;\n            \n            // ÁªòÂà∂Âå∫ÂüüËæπÁïå\n            drawAreaBoundary(birdLocations.value);\n            \n            isLoading.value = false;\n            \n            uni.showToast({\n                title: `Â∑≤Âä†ËΩΩ${birdLocations.value.length}‰∏™ËßÇÊµãÁÇπ`,\n                icon: 'success',\n                duration: 1500\n            });\n        }, 800);\n    } catch (error) {\n        console.error('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:', error);\n        isLoading.value = false;\n        uni.showToast({\n            title: 'Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•',\n            icon: 'none'\n        });\n    }\n};\n\n/**\n * ÁªòÂà∂Âå∫ÂüüËæπÁïå\n */\nconst drawAreaBoundary = (locations) => {\n    if (locations.length < 3) return; // Ëá≥Â∞ëÈúÄË¶Å3‰∏™ÁÇπÊâçËÉΩÂΩ¢Êàê‰∏Ä‰∏™Âå∫Âüü\n    \n    // ‰ΩøÁî®ÊâÄÊúâÁÇπÊûÑÂª∫‰∏Ä‰∏™Â§öËæπÂΩ¢\n    const points = locations.map(loc => ({\n        latitude: loc.latitude,\n        longitude: loc.longitude\n    }));\n    \n    // Ê∑ªÂä†Á¨¨‰∏Ä‰∏™ÁÇπ‰Ωú‰∏∫ÁªìÊùüÁÇπÔºåÂΩ¢ÊàêÈó≠ÁéØ\n    points.push(points[0]);\n    \n    polyline.value = [{\n        points: points,\n        color: '#1E90FF77', // ÂçäÈÄèÊòéËìùËâ≤\n        width: 2,\n        dottedLine: false,\n        arrowLine: false\n    }];\n};\n\n// ========== Ê†áËÆ∞ÁÇπÂáªÂíå‰ø°ÊÅØÂç°ÁâáÂäüËÉΩ ==========\n/**\n * Â§ÑÁêÜÊ†áËÆ∞ÁÇπÂáª‰∫ã‰ª∂\n */\nconst onMarkerTap = (e) => {\n    console.log('Marker tapped:', e);\n    const markerId = e.detail.markerId;\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    // Êü•ÊâæË¢´ÁÇπÂáªÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ\n    const location = birdLocations.value.find(loc => loc.id === markerId);\n    \n    if (location) {\n        // ËÆæÁΩÆÈÄâ‰∏≠ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ\n        selectedLocation.value = location;\n        // ÊòæÁ§∫‰ø°ÊÅØÂç°Áâá\n        showInfoCard.value = true;\n        \n        console.log('ÊòæÁ§∫Âú∞ÁÇπ‰ø°ÊÅØ:', location.name);\n    } else {\n        console.log('Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÂú∞ÁÇπ‰ø°ÊÅØ, ID:', markerId);\n        uni.showToast({\n            title: 'Êú™ÊâæÂà∞ËØ•Âú∞ÁÇπ‰ø°ÊÅØ',\n            icon: 'none'\n        });\n    }\n};\n\n/**\n * ÂÖ≥Èó≠‰ø°ÊÅØÂç°Áâá\n */\nconst closeInfoCard = () => {\n    showInfoCard.value = false;\n    selectedLocation.value = {};\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n};\n\n// ========== Êìç‰ΩúÊåâÈíÆÂäüËÉΩ ==========\n/**\n * Êü•ÁúãÂú∞ÁÇπËØ¶ÊÉÖ\n */\nconst viewDetails = () => {\n    // TODO: Ë∑≥ËΩ¨Âà∞Âú∞ÁÇπËØ¶ÊÉÖÈ°µÈù¢\n    console.log('Êü•ÁúãËØ¶ÊÉÖ:', selectedLocation.value.name);\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    // Á§∫‰æãË∑≥ËΩ¨ÔºàÈúÄË¶ÅÊ†πÊçÆÂÆûÈôÖË∑ØÁî±ÈÖçÁΩÆË∞ÉÊï¥Ôºâ\n    uni.navigateTo({\n        url: `/pages/LocationDetail/LocationDetail?id=${selectedLocation.value.id}`,\n        fail: (error) => {\n            console.error('Ë∑≥ËΩ¨Â§±Ë¥•:', error);\n            uni.showToast({\n                title: 'ÂäüËÉΩÂºÄÂèë‰∏≠',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n/**\n * ÂØºËà™Âà∞Âú∞ÁÇπ\n */\nconst navigateToLocation = () => {\n    const location = selectedLocation.value;\n    console.log('ÂØºËà™Âà∞:', location.name);\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'heavy'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    // ÊâìÂºÄÁ≥ªÁªüÂú∞ÂõæÂ∫îÁî®ËøõË°åÂØºËà™\n    uni.openLocation({\n        latitude: location.latitude,\n        longitude: location.longitude,\n        name: location.name,\n        address: location.description,\n        success: () => {\n            console.log('ÊàêÂäüÊâìÂºÄÂú∞ÂõæÂØºËà™');\n        },\n        fail: (error) => {\n            console.error('ÊâìÂºÄÂú∞ÂõæÂ§±Ë¥•:', error);\n            uni.showToast({\n                title: 'Êó†Ê≥ïÊâìÂºÄÂØºËà™',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n/**\n * ÂàÜ‰∫´Âú∞ÁÇπ\n */\nconst shareLocation = () => {\n    const location = selectedLocation.value;\n    console.log('ÂàÜ‰∫´Âú∞ÁÇπ:', location.name);\n    \n    // Ê∑ªÂä†Ëß¶ËßâÂèçÈ¶à\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('Ëß¶ËßâÂèçÈ¶à‰∏çÊîØÊåÅ:', error);\n    }\n    \n    // TODO: ÂÆûÁé∞ÂàÜ‰∫´ÂäüËÉΩ\n    uni.share({\n        provider: 'weixin',\n        scene: 'WXSceneSession',\n        type: 0,\n        href: `https://yourapp.com/location/${location.id}`,\n        title: `${location.name} - ËßÇÈ∏üÂú∞ÁÇπÊé®Ëçê`,\n        summary: location.description,\n        imageUrl: getOSSUrl(location.image, 'medium'),\n        success: () => {\n            uni.showToast({\n                title: 'ÂàÜ‰∫´ÊàêÂäü',\n                icon: 'success'\n            });\n            closeInfoCard();\n        },\n        fail: (error) => {\n            console.error('ÂàÜ‰∫´Â§±Ë¥•:', error);\n            uni.showToast({\n                title: 'ÂàÜ‰∫´Â§±Ë¥•',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n// ========== ÈîôËØØÂ§ÑÁêÜ ==========\n/**\n * ÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\n */\nconst onIconError = (error) => {\n    console.warn('ÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•:', error);\n    // ÈöêËóèÂ§±Ë¥•ÁöÑÂõæÊ†á\n    if (error.target) {\n        error.target.style.display = 'none';\n    }\n};\n\n/**\n * ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\n */\nconst onImageError = (error) => {\n    console.warn('Âú∞ÁÇπÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', error);\n    // ËÆæÁΩÆÈªòËÆ§Âç†‰ΩçÂõæ\n    if (error.target) {\n        const defaultImageUrl = getOSSUrl('static/images/location-placeholder.jpg', 'large');\n        error.target.src = defaultImageUrl;\n    }\n};\n\n// ========== ÁîüÂëΩÂë®Êúü ==========\nonMounted(() => {\n    console.log('Âú∞ÂõæÈ°µÈù¢Â∑≤Âä†ËΩΩ');\n    getCurrentLocation();\n    \n    // 2ÁßíÂêéÊòæÁ§∫Âõæ‰æã\n    setTimeout(() => {\n        showLegend.value = true;\n        setTimeout(() => {\n            showLegend.value = false;\n        }, 5000);\n    }, 2000);\n});\n</script>\n\n<style>\n.container {\n    position: relative;\n    height: 100vh;\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n}\n\n/* ÊêúÁ¥¢Ê†èÊ†∑Âºè */\n.search-container {\n    position: fixed;\n    top: var(--status-bar-height, 44px);\n    left: 0;\n    right: 0;\n    z-index: 100;\n    padding: 20rpx;\n}\n\n.search-box {\n    display: flex;\n    align-items: center;\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 50rpx;\n    padding: 16rpx 30rpx;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n    backdrop-filter: blur(10px);\n    transition: all 0.3s ease;\n}\n\n.search-box:focus-within {\n    box-shadow: 0 8rpx 30rpx rgba(59, 130, 246, 0.2);\n    transform: translateY(-2rpx);\n}\n\n.icon-search {\n    margin-right: 16rpx;\n    font-size: 32rpx;\n    color: #64748b;\n}\n\n.search-input {\n    flex: 1;\n    font-size: 28rpx;\n    color: #1e293b;\n    background: transparent;\n    border: none;\n    outline: none;\n}\n\n.search-btn {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    padding: 12rpx 20rpx;\n    border-radius: 30rpx;\n    margin-left: 10rpx;\n    transition: all 0.3s ease;\n}\n\n.search-btn:active {\n    transform: scale(0.95);\n}\n\n.search-btn-text {\n    font-size: 24rpx;\n    color: white;\n}\n\n/* Âú∞ÂõæÂÆπÂô® */\n.map-container {\n    position: relative;\n    height: 100%;\n    width: 100%;\n}\n\n.map {\n    width: 100%;\n    height: 100%;\n}\n\n/* ÊéßÂà∂ÊåâÈíÆ */\n.control-buttons {\n    position: fixed;\n    right: 30rpx;\n    bottom: 200rpx;\n    z-index: 100;\n    display: flex;\n    flex-direction: column;\n    gap: 15rpx;\n}\n\n.control-btn {\n    background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);\n    width: 80rpx;\n    height: 80rpx;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    backdrop-filter: blur(10px);\n}\n\n.control-btn:active {\n    transform: scale(0.9);\n    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);\n}\n\n.control-btn:hover {\n    transform: translateY(-4rpx);\n    box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n}\n\n.icon-location {\n    font-size: 40rpx;\n}\n\n.zoom-icon {\n    font-size: 48rpx;\n    font-weight: bold;\n    color: #374151;\n}\n\n.layer-icon {\n    font-size: 36rpx;\n}\n\n/* Âä†ËΩΩË¶ÜÁõñÂ±Ç */\n.loading-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 200;\n    backdrop-filter: blur(5px);\n}\n\n.loading-content {\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    padding: 40rpx;\n    border-radius: 20rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.loading-spinner {\n    width: 60rpx;\n    height: 60rpx;\n    border: 4rpx solid #e2e8f0;\n    border-top: 4rpx solid #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 20rpx;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n    color: #374151;\n    font-size: 28rpx;\n}\n\n/* Âú∞ÂõæÂõæ‰æã */\n.map-legend {\n    position: fixed;\n    top: 200rpx;\n    left: 30rpx;\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n    z-index: 90;\n    backdrop-filter: blur(10px);\n    max-width: 300rpx;\n}\n\n.legend-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 15rpx;\n}\n\n.legend-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #1e293b;\n}\n\n.legend-close {\n    font-size: 36rpx;\n    color: #64748b;\n    cursor: pointer;\n    padding: 5rpx;\n}\n\n.legend-items {\n    display: flex;\n    flex-direction: column;\n    gap: 10rpx;\n}\n\n.legend-item {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n}\n\n.legend-icon {\n    width: 32rpx;\n    height: 32rpx;\n}\n\n.legend-text {\n    font-size: 24rpx;\n    color: #475569;\n}\n\n/* ‰ø°ÊÅØÂç°ÁâáÊ†∑Âºè */\n.info-card {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 150;\n    padding: 30rpx;\n    padding-bottom: calc(30rpx + env(safe-area-inset-bottom));\n}\n\n.info-card-inner {\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 24rpx;\n    overflow: hidden;\n    box-shadow: 0 8rpx 40rpx rgba(0, 0, 0, 0.15);\n    position: relative;\n    max-height: 80vh;\n    overflow-y: auto;\n    backdrop-filter: blur(20px);\n}\n\n.info-card-header {\n    position: relative;\n}\n\n.info-card-close {\n    position: absolute;\n    top: 20rpx;\n    right: 20rpx;\n    width: 60rpx;\n    height: 60rpx;\n    background: rgba(0, 0, 0, 0.6);\n    color: #ffffff;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 36rpx;\n    z-index: 10;\n    transition: all 0.3s ease;\n}\n\n.info-card-close:active {\n    transform: scale(0.9);\n    background: rgba(0, 0, 0, 0.8);\n}\n\n.info-card-image {\n    width: 100%;\n    height: 320rpx;\n    object-fit: cover;\n}\n\n.info-card-badge {\n    position: absolute;\n    bottom: 20rpx;\n    left: 20rpx;\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    padding: 8rpx 16rpx;\n    border-radius: 20rpx;\n    font-size: 24rpx;\n    backdrop-filter: blur(10px);\n}\n\n.info-card-content {\n    padding: 30rpx;\n}\n\n.info-card-title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #1e293b;\n    margin-bottom: 15rpx;\n}\n\n.info-card-description {\n    font-size: 28rpx;\n    color: #475569;\n    line-height: 1.6;\n    margin-bottom: 30rpx;\n}\n\n/* È∏üÁ±ªÁªüËÆ°Ê†∑Âºè */\n.bird-stats {\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n    border-radius: 16rpx;\n    padding: 25rpx;\n    margin-bottom: 25rpx;\n    border: 1rpx solid rgba(59, 130, 246, 0.1);\n}\n\n.stats-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 20rpx;\n}\n\n.stats-row {\n    display: flex;\n    justify-content: space-between;\n}\n\n.stat-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    flex: 1;\n}\n\n.stat-value {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: #3b82f6;\n}\n\n.stat-label {\n    font-size: 24rpx;\n    color: #64748b;\n    margin-top: 8rpx;\n}\n\n/* ÊúÄ‰Ω≥Êó∂Èó¥ */\n.best-time {\n    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    margin-bottom: 25rpx;\n    border: 1rpx solid rgba(245, 158, 11, 0.2);\n}\n\n.time-title {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #92400e;\n    margin-bottom: 10rpx;\n}\n\n.time-content {\n    font-size: 24rpx;\n    color: #a16207;\n    line-height: 1.5;\n}\n\n/* Â∏∏ËßÅÈ∏üÁ±ª */\n.common-birds {\n    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    margin-bottom: 30rpx;\n    border: 1rpx solid rgba(34, 197, 94, 0.1);\n}\n\n.birds-title {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #166534;\n    margin-bottom: 15rpx;\n}\n\n.birds-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10rpx;\n}\n\n.bird-tag {\n    background: rgba(34, 197, 94, 0.1);\n    color: #166534;\n    padding: 8rpx 16rpx;\n    border-radius: 20rpx;\n    font-size: 22rpx;\n    border: 1rpx solid rgba(34, 197, 94, 0.2);\n}\n\n/* Êìç‰ΩúÊåâÈíÆ */\n.action-buttons {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 15rpx;\n}\n\n.action-btn {\n    height: 80rpx;\n    border-radius: 40rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 24rpx;\n    border: none;\n    transition: all 0.3s ease;\n    gap: 5rpx;\n}\n\n.action-btn:active {\n    transform: scale(0.95);\n}\n\n.btn-icon {\n    font-size: 28rpx;\n}\n\n.details-btn {\n    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);\n    color: #374151;\n}\n\n.details-btn:hover {\n    background: linear-gradient(135deg, #e2e8f0, #cbd5e1);\n}\n\n.navigate-btn {\n    background: linear-gradient(135deg, #22c55e, #16a34a);\n    color: #ffffff;\n}\n\n.navigate-btn:hover {\n    background: linear-gradient(135deg, #16a34a, #15803d);\n}\n\n.share-btn {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: #ffffff;\n}\n\n.share-btn:hover {\n    background: linear-gradient(135deg, #1d4ed8, #1e40af);\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media screen and (max-width: 750rpx) {\n    .search-container {\n        padding: 15rpx;\n    }\n    \n    .control-buttons {\n        right: 20rpx;\n        bottom: 180rpx;\n    }\n    \n    .control-btn {\n        width: 70rpx;\n        height: 70rpx;\n    }\n    \n    .info-card {\n        padding: 20rpx;\n    }\n    \n    .info-card-content {\n        padding: 25rpx;\n    }\n    \n    .action-buttons {\n        grid-template-columns: 1fr;\n        gap: 10rpx;\n    }\n    \n    .action-btn {\n        flex-direction: row;\n        justify-content: center;\n        gap: 10rpx;\n    }\n    \n    .map-legend {\n        left: 20rpx;\n        top: 180rpx;\n        max-width: 250rpx;\n    }\n}\n\n/* ÊöóËâ≤Ê®°ÂºèÈÄÇÈÖç */\n@media (prefers-color-scheme: dark) {\n    .container {\n        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);\n    }\n    \n    .search-box {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .search-input {\n        color: #f1f5f9;\n    }\n    \n    .control-btn {\n        background: linear-gradient(135deg, #334155 0%, #475569 100%);\n    }\n    \n    .loading-content {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .loading-text {\n        color: #f1f5f9;\n    }\n    \n    .map-legend {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .legend-title {\n        color: #f1f5f9;\n    }\n    \n    .legend-text {\n        color: #cbd5e1;\n    }\n    \n    .info-card-inner {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .info-card-title {\n        color: #f1f5f9;\n    }\n    \n    .info-card-description {\n        color: #cbd5e1;\n    }\n}\n\n/* Âä®ÁîªÊïàÊûú */\n@keyframes slideUp {\n    from {\n        transform: translateY(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n.info-card {\n    animation: slideUp 0.3s ease-out;\n}\n\n/* ÊÄßËÉΩ‰ºòÂåñ */\n.control-btn, .action-btn, .search-box, .info-card-inner {\n    will-change: transform, box-shadow;\n}\n\n/* Èò≤Ê≠¢ÊñáÊú¨ÈÄâ‰∏≠ */\n.info-card-title, .stats-title, .legend-title {\n    user-select: none;\n    -webkit-user-select: none;\n}\n</style>","import MiniProgramPage from 'D:/sitpÈ°πÁõÆ/miniprogram/bird-frontend/pages/MapPage/MapPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","onMounted","MiniProgramPage"],"mappings":"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"}