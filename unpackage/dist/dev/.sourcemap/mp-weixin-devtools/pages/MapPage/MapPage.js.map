{"version":3,"names":["TabBar","TENCENT_MAP_KEY","ossConfig","baseUrl","getOSSUrl","filename","size","arguments","length","undefined","cleanFilename","startsWith","slice","params","concat","latitude","common_vendor","ref","longitude","scale","searchText","markers","polyline","showInfoCard","selectedLocation","isLoading","loadingText","showLegend","currentMapLayer","birdLocations","id","name","category","image","description","birdStats","species","observations","rareSpecies","bestTime","commonBirds","markerIcon","computed","value","reduce","total","location","checkAndRequestLocationPermission","Promise","resolve","reject","index","getSetting","success","res","authSetting","showModal","title","content","confirmText","cancelText","modalRes","confirm","openSetting","settingRes","Error","authorize","scope","fail","err","getCurrentLocation","then","getLocation","type","showToast","icon","duration","loadBirdLocations","__f__","complete","catch","moveToCurrentLocation","vibrateShort","error","searchLocation","keyword","request","url","method","data","key","boundary","page_size","page_index","status","handleSearch","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","localResults","firstResult","result","searchMarker","dbMarkers","wrap","_callee$","_context","prev","next","trim","abrupt","filter","includes","some","bird","highlightSearchResults","sent","lat","lng","iconPath","width","height","callout","color","fontSize","borderRadius","bgColor","padding","display","marker","_toConsumableArray2","t0","message","finish","stop","apply","results","map","isHighlighted","zoomIn","zoomOut","switchMapLayer","onRegionChange","e","setTimeout","locationMarkers","loc","drawAreaBoundary","locations","points","push","dottedLine","arrowLine","onMarkerTap","markerId","detail","find","closeInfoCard","viewDetails","navigateTo","navigateToLocation","openLocation","address","shareLocation","share","provider","scene","href","summary","imageUrl","onIconError","target","style","onImageError","defaultImageUrl","src","onMounted","wx","createPage","_sfc_main"],"sources":["MapPage.vue","cGFnZXMvTWFwUGFnZS9NYXBQYWdlLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <!-- Search Bar -->\n        <view class=\"search-container\">\n            <view class=\"search-box\">\n                <text class=\"icon-search\">🔍</text>\n                <input\n                    type=\"text\"\n                    class=\"search-input\"\n                    placeholder=\"搜索目的地/鸟类名称\"\n                    v-model=\"searchText\"\n                    @confirm=\"handleSearch\"\n                />\n                <view class=\"search-btn\" @tap=\"handleSearch\" v-if=\"searchText\">\n                    <text class=\"search-btn-text\">搜索</text>\n                </view>\n            </view>\n        </view>\n\n        <!-- Map Container -->\n        <view class=\"map-container\">\n            <map\n                class=\"map\"\n                :latitude=\"latitude\"\n                :longitude=\"longitude\"\n                :markers=\"markers\"\n                :polyline=\"polyline\"\n                :scale=\"scale\"\n                show-location\n                @markertap=\"onMarkerTap\"\n                @regionchange=\"onRegionChange\"\n            ></map>\n\n            <!-- Control Buttons -->\n            <view class=\"control-buttons\">\n                <!-- My Location Button -->\n                <view class=\"control-btn location-btn\" @tap=\"moveToCurrentLocation\">\n                    <text class=\"icon-location\">📍</text>\n                </view>\n                \n                <!-- Zoom In Button -->\n                <view class=\"control-btn zoom-btn\" @tap=\"zoomIn\">\n                    <text class=\"zoom-icon\">+</text>\n                </view>\n                \n                <!-- Zoom Out Button -->\n                <view class=\"control-btn zoom-btn\" @tap=\"zoomOut\">\n                    <text class=\"zoom-icon\">-</text>\n                </view>\n                \n                <!-- Layer Switch Button -->\n                <view class=\"control-btn layer-btn\" @tap=\"switchMapLayer\">\n                    <text class=\"layer-icon\">🗺️</text>\n                </view>\n            </view>\n            \n            <!-- Info Card (显示点击后的地点信息) -->\n            <view class=\"info-card\" v-if=\"showInfoCard\" @tap.stop=\"closeInfoCard\">\n                <view class=\"info-card-inner\" @tap.stop=\"\">\n                    <view class=\"info-card-header\">\n                        <view class=\"info-card-close\" @tap=\"closeInfoCard\">×</view>\n                        <image \n                            class=\"info-card-image\" \n                            :src=\"getOSSUrl(selectedLocation.image, 'large')\" \n                            mode=\"aspectFill\"\n                            @error=\"onImageError\"\n                        ></image>\n                        <view class=\"info-card-badge\">{{selectedLocation.category}}</view>\n                    </view>\n                    \n                    <view class=\"info-card-content\">\n                        <view class=\"info-card-title\">{{selectedLocation.name}}</view>\n                        <view class=\"info-card-description\">{{selectedLocation.description}}</view>\n                        \n                        <!-- 鸟类观测统计 -->\n                        <view class=\"bird-stats\" v-if=\"selectedLocation.birdStats\">\n                            <view class=\"stats-title\">📊 观测统计</view>\n                            <view class=\"stats-row\">\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.species}}</text>\n                                    <text class=\"stat-label\">鸟种数量</text>\n                                </view>\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.observations}}</text>\n                                    <text class=\"stat-label\">观测次数</text>\n                                </view>\n                                <view class=\"stat-item\">\n                                    <text class=\"stat-value\">{{selectedLocation.birdStats.rareSpecies}}</text>\n                                    <text class=\"stat-label\">珍稀鸟种</text>\n                                </view>\n                            </view>\n                        </view>\n                        \n                        <!-- 最佳观鸟时间 -->\n                        <view class=\"best-time\" v-if=\"selectedLocation.bestTime\">\n                            <view class=\"time-title\">⏰ 最佳观鸟时间</view>\n                            <view class=\"time-content\">{{selectedLocation.bestTime}}</view>\n                        </view>\n                        \n                        <!-- 常见鸟类预览 -->\n                        <view class=\"common-birds\" v-if=\"selectedLocation.commonBirds\">\n                            <view class=\"birds-title\">🐦 常见鸟类</view>\n                            <view class=\"birds-list\">\n                                <view \n                                    v-for=\"bird in selectedLocation.commonBirds\" \n                                    :key=\"bird.id\"\n                                    class=\"bird-tag\"\n                                >\n                                    {{bird.name}}\n                                </view>\n                            </view>\n                        </view>\n                        \n                        <!-- 操作按钮 -->\n                        <view class=\"action-buttons\">\n                            <button class=\"action-btn details-btn\" @tap=\"viewDetails\">\n                                <text class=\"btn-icon\">📖</text>\n                                <text>查看详情</text>\n                            </button>\n                            <button class=\"action-btn navigate-btn\" @tap=\"navigateToLocation\">\n                                <text class=\"btn-icon\">🧭</text>\n                                <text>导航前往</text>\n                            </button>\n                            <button class=\"action-btn share-btn\" @tap=\"shareLocation\">\n                                <text class=\"btn-icon\">📤</text>\n                                <text>分享位置</text>\n                            </button>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </view>\n        \n        <!-- Loading Overlay -->\n        <view class=\"loading-overlay\" v-if=\"isLoading\">\n            <view class=\"loading-content\">\n                <view class=\"loading-spinner\"></view>\n                <text class=\"loading-text\">{{loadingText}}</text>\n            </view>\n        </view>\n        \n        <!-- 地图图例 -->\n        <view class=\"map-legend\" v-if=\"showLegend\">\n            <view class=\"legend-header\">\n                <text class=\"legend-title\">🗺️ 地图图例</text>\n                <text class=\"legend-close\" @tap=\"showLegend = false\">×</text>\n            </view>\n            <view class=\"legend-items\">\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-wetland.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">湿地公园</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-park.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">城市公园</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-river.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">河道湿地</text>\n                </view>\n                <view class=\"legend-item\">\n                    <image :src=\"getOSSUrl('static/icons/marker-residential.png', 'icon')\" class=\"legend-icon\" @error=\"onIconError\"></image>\n                    <text class=\"legend-text\">居民区</text>\n                </view>\n            </view>\n        </view>\n        \n        <!-- 添加底部导航栏 -->\n        <tab-bar></tab-bar>\n    </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport TabBar from '@/components/tabbar.vue';\n\n// ========== OSS配置 ==========\nconst ossConfig = {\n  baseUrl: 'https://birdfront-oss.oss-cn-shanghai.aliyuncs.com'\n};\n\n// ========== OSS工具方法 ==========\n/**\n * 获取OSS图片URL\n * @param {string} filename - 文件名\n * @param {string} size - 尺寸类型\n * @returns {string} 完整的OSS URL\n */\nconst getOSSUrl = (filename, size = 'medium') => {\n  if (!filename) return '';\n  \n  // 确保文件名不以斜杠开头\n  const cleanFilename = filename.startsWith('/') ? filename.slice(1) : filename;\n  \n  // 根据尺寸类型设置不同的处理参数\n  let params = '';\n  switch(size) {\n    case 'icon':\n      params = '?x-oss-process=image/resize,m_lfit,w_32,h_32/quality,q_90/format,webp';\n      break;\n    case 'small':\n      params = '?x-oss-process=image/resize,m_lfit,w_100,h_100/quality,q_90/format,webp';\n      break;\n    case 'medium':\n      params = '?x-oss-process=image/resize,m_lfit,w_200,h_150/quality,q_90/format,webp';\n      break;\n    case 'large':\n      params = '?x-oss-process=image/resize,m_lfit,w_400,h_250/quality,q_90/format,webp';\n      break;\n    case 'marker':\n      params = '?x-oss-process=image/resize,m_lfit,w_40,h_40/quality,q_90/format,webp';\n      break;\n    default:\n      params = '?x-oss-process=image/resize,m_lfit,w_200,h_150/quality,q_90/format,webp';\n  }\n  \n  return `${ossConfig.baseUrl}/${cleanFilename}${params}`;\n};\n\n// 腾讯地图API密钥\nconst TENCENT_MAP_KEY = '2VEBZ-H2SW5-URJIL-I26ZE-2EB2E-BOF27';\n\n// ========== 响应式状态 ==========\nconst latitude = ref(31.2304)  // 默认纬度（上海）\nconst longitude = ref(121.4737)  // 默认经度（上海）\nconst scale = ref(14)  // 默认缩放级别\nconst searchText = ref('')\nconst markers = ref([])\nconst polyline = ref([]) // 用于显示区域边界\n\n// UI状态\nconst showInfoCard = ref(false)\nconst selectedLocation = ref({})\nconst isLoading = ref(false)\nconst loadingText = ref('加载中...')\nconst showLegend = ref(false)\nconst currentMapLayer = ref('standard') // standard, satellite\n\n// ========== Mock数据 - 鸟类观测点 ==========\nconst birdLocations = ref([\n    {\n        id: 1,\n        name: '嘉定紫藤园',\n        category: '湿地公园',\n        latitude: 31.2354,\n        longitude: 121.4617,\n        image: 'static/images/locations/jiading-wisteria.jpg',\n        description: '嘉定紫藤园是上海市著名的观鸟地点，拥有丰富的湿地生态系统。这里常年有20多种水鸟栖息，是观测候鸟迁徙的绝佳地点。园内有专门的观鸟平台，每年春秋两季是最佳观鸟时间。',\n        birdStats: {\n            species: 42,\n            observations: 186,\n            rareSpecies: 3\n        },\n        bestTime: '春秋两季（3-5月，9-11月）清晨5-8点，傍晚4-6点',\n        commonBirds: [\n            { id: 1, name: '白鹭' },\n            { id: 2, name: '夜鹭' },\n            { id: 3, name: '小䴙䴘' },\n            { id: 4, name: '绿头鸭' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 2,\n        name: '新城公园',\n        category: '城市公园',\n        latitude: 31.2404,\n        longitude: 121.4837,\n        image: 'static/images/locations/xincheng-park.jpg',\n        description: '新城公园是市区内难得的鸟类栖息地，公园内有多种乔木和灌木，为小型鸟类提供了良好的栖息环境。这里常见麻雀、白头鹎、黑尾蜡嘴雀等鸟类，是城市中轻松观鸟的好去处。',\n        birdStats: {\n            species: 18,\n            observations: 94,\n            rareSpecies: 0\n        },\n        bestTime: '全年适宜，早晨6-9点最佳',\n        commonBirds: [\n            { id: 5, name: '白头鹎' },\n            { id: 6, name: '麻雀' },\n            { id: 7, name: '乌鸫' },\n            { id: 8, name: '珠颈斑鸠' }\n        ],\n        markerIcon: 'static/icons/marker-park.png'\n    },\n    {\n        id: 3,\n        name: '环城河绿带',\n        category: '河道湿地',\n        latitude: 31.2284,\n        longitude: 121.4527,\n        image: 'static/images/locations/huancheng-river.jpg',\n        description: '环城河绿带沿线栽种了大量水生植物，吸引了多种水鸟前来觅食和栖息。河边设有多个观鸟点，常见鸟类包括白鹭、夜鹭、绿头鸭等。这里环境幽静，是观鸟爱好者的秘密天堂。',\n        birdStats: {\n            species: 26,\n            observations: 132,\n            rareSpecies: 1\n        },\n        bestTime: '春夏季节（4-8月）早晚时分',\n        commonBirds: [\n            { id: 9, name: '白鹭' },\n            { id: 10, name: '绿头鸭' },\n            { id: 11, name: '翠鸟' },\n            { id: 12, name: '黑水鸡' }\n        ],\n        markerIcon: 'static/icons/marker-river.png'\n    },\n    {\n        id: 4,\n        name: '嘉宝花园别墅',\n        category: '居民区',\n        latitude: 31.2234,\n        longitude: 121.4637,\n        image: 'static/images/locations/jiabao-garden.jpg',\n        description: '嘉宝花园别墅区内绿化良好，种植了多种果树和花卉，吸引了很多小型鸟类前来筑巢。这里可以观察到柳莺、绣眼鸟等小型鸟类，是城市观鸟的好去处。此处为居民区，参观时请保持安静。',\n        birdStats: {\n            species: 13,\n            observations: 67,\n            rareSpecies: 0\n        },\n        bestTime: '春季（3-5月）清晨时分',\n        commonBirds: [\n            { id: 13, name: '柳莺' },\n            { id: 14, name: '绣眼鸟' },\n            { id: 15, name: '红嘴蓝鹊' },\n            { id: 16, name: '白头鹎' }\n        ],\n        markerIcon: 'static/icons/marker-residential.png'\n    },\n    {\n        id: 5,\n        name: '梦花湖',\n        category: '湖泊湿地',\n        latitude: 31.2454,\n        longitude: 121.4557,\n        image: 'static/images/locations/menghua-lake.jpg',\n        description: '梦花湖是一个人工湖泊，周围植被茂盛，湖面开阔，是多种水鸟和涉禽的栖息地。这里可以观察到白鹭、苍鹭、小䴙䴘等水鸟，以及多种雁鸭类。湖边有专门的观鸟屋和栈道，适合长时间观鸟。',\n        birdStats: {\n            species: 35,\n            observations: 158,\n            rareSpecies: 2\n        },\n        bestTime: '全年适宜，迁徙季节（春秋）最佳',\n        commonBirds: [\n            { id: 17, name: '苍鹭' },\n            { id: 18, name: '小䴙䴘' },\n            { id: 19, name: '赤膀鸭' },\n            { id: 20, name: '白骨顶' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 6,\n        name: '垃圾填埋场湿地',\n        category: '恢复性湿地',\n        latitude: 31.2194,\n        longitude: 121.4867,\n        image: 'static/images/locations/landfill-wetland.jpg',\n        description: '这个区域原是垃圾填埋场，后经过生态修复，现已成为重要的鸟类栖息地。由于昆虫和小型动物丰富，吸引了大量猛禽和涉禽。这里常见猛禽包括红隼、普通鵟等，是观察猛禽的理想场所。',\n        birdStats: {\n            species: 22,\n            observations: 76,\n            rareSpecies: 2\n        },\n        bestTime: '秋冬季节（10-2月）中午时分',\n        commonBirds: [\n            { id: 21, name: '红隼' },\n            { id: 22, name: '普通鵟' },\n            { id: 23, name: '灰伯劳' },\n            { id: 24, name: '田鹨' }\n        ],\n        markerIcon: 'static/icons/marker-wetland.png'\n    },\n    {\n        id: 7,\n        name: '绿地嘉尚国际广场',\n        category: '城市绿地',\n        latitude: 31.2284,\n        longitude: 121.4987,\n        image: 'static/images/locations/jiashang-plaza.jpg',\n        description: '绿地嘉尚国际广场周边有精心设计的城市绿地，种植了多种乡土树种，为鸟类提供了良好的栖息环境。这里常见鸟类包括珠颈斑鸠、树麻雀、白头鹎等，适合早晨或傍晚前来观鸟。',\n        birdStats: {\n            species: 16,\n            observations: 83,\n            rareSpecies: 0\n        },\n        bestTime: '全年适宜，早晨和傍晚最佳',\n        commonBirds: [\n            { id: 25, name: '珠颈斑鸠' },\n            { id: 26, name: '树麻雀' },\n            { id: 27, name: '白头鹎' },\n            { id: 28, name: '八哥' }\n        ],\n        markerIcon: 'static/icons/marker-park.png'\n    }\n]);\n\n// ========== 计算属性 ==========\nconst totalSpecies = computed(() => {\n    return birdLocations.value.reduce((total, location) => {\n        return total + location.birdStats.species;\n    }, 0);\n});\n\nconst totalObservations = computed(() => {\n    return birdLocations.value.reduce((total, location) => {\n        return total + location.birdStats.observations;\n    }, 0);\n});\n\n// ========== 权限和定位功能 ==========\n/**\n * 检查并获取位置权限\n */\nconst checkAndRequestLocationPermission = () => {\n    return new Promise((resolve, reject) => {\n        uni.getSetting({\n            success: (res) => {\n                if (res.authSetting['scope.userLocation'] === false) {\n                    // 用户已拒绝过授权，显示引导弹窗\n                    uni.showModal({\n                        title: '需要位置权限',\n                        content: '为了提供准确的地图服务，需要获取您的位置信息。请在设置中允许\"云雀解码\"访问您的位置。',\n                        confirmText: '去设置',\n                        cancelText: '取消',\n                        success: (modalRes) => {\n                            if (modalRes.confirm) {\n                                // 打开设置页面\n                                uni.openSetting({\n                                    success: (settingRes) => {\n                                        if (settingRes.authSetting['scope.userLocation']) {\n                                            resolve();\n                                        } else {\n                                            reject(new Error('未获得位置权限'));\n                                        }\n                                    }\n                                });\n                            } else {\n                                reject(new Error('用户取消授权'));\n                            }\n                        }\n                    });\n                } else if (res.authSetting['scope.userLocation'] === true) {\n                    // 用户已授权\n                    resolve();\n                } else {\n                    // 首次请求授权\n                    uni.authorize({\n                        scope: 'scope.userLocation',\n                        success: () => {\n                            resolve();\n                        },\n                        fail: (err) => {\n                            reject(err);\n                        }\n                    });\n                }\n            },\n            fail: (err) => {\n                reject(err);\n            }\n        });\n    });\n};\n\n/**\n * 获取当前位置\n */\nconst getCurrentLocation = () => {\n    isLoading.value = true;\n    loadingText.value = '定位中...';\n\n    // 先检查权限\n    checkAndRequestLocationPermission()\n        .then(() => {\n            // 获取位置\n            uni.getLocation({\n                type: 'gcj02',\n                success: (res) => {\n                    latitude.value = res.latitude;\n                    longitude.value = res.longitude;\n                    scale.value = 16; // 放大地图以更清晰地显示位置\n\n                    uni.showToast({\n                        title: '定位成功',\n                        icon: 'success',\n                        duration: 1500\n                    });\n\n                    // 加载鸟类观测点数据\n                    loadBirdLocations();\n                },\n                fail: (err) => {\n                    console.error('获取位置失败：', err);\n                    uni.showToast({\n                        title: '获取位置失败',\n                        icon: 'none'\n                    });\n                    \n                    // 即使获取位置失败，也加载鸟类观测点数据\n                    loadBirdLocations();\n                },\n                complete: () => {\n                    isLoading.value = false;\n                }\n            });\n        })\n        .catch((err) => {\n            console.error('位置权限错误：', err);\n            isLoading.value = false;\n            \n            // 使用默认位置加载数据\n            loadBirdLocations();\n        });\n};\n\n/**\n * 移动到当前位置\n */\nconst moveToCurrentLocation = () => {\n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    getCurrentLocation();\n};\n\n// ========== 搜索功能 ==========\n/**\n * 使用腾讯地图API进行地点搜索\n */\nconst searchLocation = (keyword) => {\n    return new Promise((resolve, reject) => {\n        uni.request({\n            url: `https://apis.map.qq.com/ws/place/v1/search`,\n            method: 'GET',\n            data: {\n                key: TENCENT_MAP_KEY,\n                keyword: keyword,\n                boundary: 'nearby(' + latitude.value + ',' + longitude.value + ',10000)', // 搜索范围10km\n                page_size: 10,\n                page_index: 1\n            },\n            success: (res) => {\n                if (res.data && res.data.status === 0 && res.data.data.length > 0) {\n                    resolve(res.data.data);\n                } else {\n                    reject(new Error('未找到相关地点'));\n                }\n            },\n            fail: (err) => {\n                reject(err);\n            }\n        });\n    });\n};\n\n/**\n * 处理搜索\n */\nconst handleSearch = async () => {\n    if (!searchText.value.trim()) {\n        uni.showToast({\n            title: '请输入搜索内容',\n            icon: 'none'\n        });\n        return;\n    }\n    \n    isLoading.value = true;\n    loadingText.value = '搜索中...';\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    try {\n        // 首先在本地数据中搜索\n        const localResults = birdLocations.value.filter(location => \n            location.name.includes(searchText.value) || \n            location.category.includes(searchText.value) ||\n            location.description.includes(searchText.value) ||\n            location.commonBirds.some(bird => bird.name.includes(searchText.value))\n        );\n        \n        if (localResults.length > 0) {\n            // 如果找到本地结果，移动到第一个结果\n            const firstResult = localResults[0];\n            latitude.value = firstResult.latitude;\n            longitude.value = firstResult.longitude;\n            scale.value = 16;\n            \n            // 高亮搜索结果\n            highlightSearchResults(localResults);\n            \n            uni.showToast({\n                title: `找到${localResults.length}个相关地点`,\n                icon: 'success'\n            });\n        } else {\n            // 如果本地没有结果，使用腾讯地图API搜索\n            const result = await searchLocation(searchText.value);\n            if (result && result.length > 0) {\n                // 更新地图中心点\n                latitude.value = result[0].location.lat;\n                longitude.value = result[0].location.lng;\n                \n                // 添加搜索结果标记\n                const searchMarker = {\n                    id: 999,\n                    latitude: result[0].location.lat,\n                    longitude: result[0].location.lng,\n                    title: result[0].title,\n                    iconPath: getOSSUrl('static/icons/marker-search.png', 'marker'),\n                    width: 40,\n                    height: 40,\n                    callout: {\n                        content: result[0].title,\n                        color: '#000000',\n                        fontSize: 12,\n                        borderRadius: 5,\n                        bgColor: '#ffffff',\n                        padding: 5,\n                        display: 'ALWAYS'\n                    }\n                };\n                \n                // 保留数据库地点标记并添加搜索结果标记\n                const dbMarkers = markers.value.filter(marker => marker.id !== 999);\n                markers.value = [...dbMarkers, searchMarker];\n                \n                scale.value = 16;\n                \n                uni.showToast({\n                    title: '搜索成功',\n                    icon: 'success'\n                });\n            }\n        }\n    } catch (error) {\n        console.error('搜索失败:', error);\n        uni.showToast({\n            title: '搜索失败: ' + error.message,\n            icon: 'none'\n        });\n    } finally {\n        isLoading.value = false;\n    }\n};\n\n/**\n * 高亮搜索结果\n */\nconst highlightSearchResults = (results) => {\n    // 更新标记，高亮搜索结果\n    markers.value = birdLocations.value.map(location => {\n        const isHighlighted = results.some(result => result.id === location.id);\n        return {\n            id: location.id,\n            latitude: location.latitude,\n            longitude: location.longitude,\n            title: location.name,\n            iconPath: getOSSUrl(\n                isHighlighted ? 'static/icons/marker-highlighted.png' : location.markerIcon, \n                'marker'\n            ),\n            width: isHighlighted ? 50 : 40,\n            height: isHighlighted ? 50 : 40,\n            callout: {\n                content: location.name,\n                color: isHighlighted ? '#ff6b6b' : '#000000',\n                fontSize: isHighlighted ? 14 : 12,\n                borderRadius: 5,\n                bgColor: isHighlighted ? '#fff5f5' : '#ffffff',\n                padding: 5,\n                display: 'ALWAYS'\n            }\n        };\n    });\n};\n\n// ========== 地图控制功能 ==========\n/**\n * 放大地图\n */\nconst zoomIn = () => {\n    if (scale.value < 20) {\n        scale.value += 2;\n        \n        // 添加触觉反馈\n        try {\n            uni.vibrateShort({\n                type: 'light'\n            });\n        } catch (error) {\n            console.warn('触觉反馈不支持:', error);\n        }\n    }\n};\n\n/**\n * 缩小地图\n */\nconst zoomOut = () => {\n    if (scale.value > 5) {\n        scale.value -= 2;\n        \n        // 添加触觉反馈\n        try {\n            uni.vibrateShort({\n                type: 'light'\n            });\n        } catch (error) {\n            console.warn('触觉反馈不支持:', error);\n        }\n    }\n};\n\n/**\n * 切换地图图层\n */\nconst switchMapLayer = () => {\n    currentMapLayer.value = currentMapLayer.value === 'standard' ? 'satellite' : 'standard';\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    uni.showToast({\n        title: currentMapLayer.value === 'standard' ? '标准地图' : '卫星地图',\n        icon: 'none',\n        duration: 1000\n    });\n};\n\n/**\n * 地图区域变化处理\n */\nconst onRegionChange = (e) => {\n    if (e.type === 'end') {\n        // 区域变化结束，可以在这里做一些处理\n        console.log('地图区域变化:', e);\n    }\n};\n\n// ========== 数据加载功能 ==========\n/**\n * 加载鸟类观测点数据\n */\nconst loadBirdLocations = () => {\n    isLoading.value = true;\n    loadingText.value = '加载观测点数据...';\n    \n    try {\n        // 模拟API延迟\n        setTimeout(() => {\n            const locationMarkers = birdLocations.value.map(loc => ({\n                id: loc.id,\n                latitude: loc.latitude,\n                longitude: loc.longitude,\n                title: loc.name,\n                iconPath: getOSSUrl(loc.markerIcon, 'marker'),\n                width: 40,\n                height: 40,\n                callout: {\n                    content: loc.name,\n                    color: '#000000',\n                    fontSize: 12,\n                    borderRadius: 5,\n                    bgColor: '#ffffff',\n                    padding: 5,\n                    display: 'ALWAYS'\n                }\n            }));\n            \n            // 更新标记\n            markers.value = locationMarkers;\n            \n            // 绘制区域边界\n            drawAreaBoundary(birdLocations.value);\n            \n            isLoading.value = false;\n            \n            uni.showToast({\n                title: `已加载${birdLocations.value.length}个观测点`,\n                icon: 'success',\n                duration: 1500\n            });\n        }, 800);\n    } catch (error) {\n        console.error('加载数据失败:', error);\n        isLoading.value = false;\n        uni.showToast({\n            title: '加载数据失败',\n            icon: 'none'\n        });\n    }\n};\n\n/**\n * 绘制区域边界\n */\nconst drawAreaBoundary = (locations) => {\n    if (locations.length < 3) return; // 至少需要3个点才能形成一个区域\n    \n    // 使用所有点构建一个多边形\n    const points = locations.map(loc => ({\n        latitude: loc.latitude,\n        longitude: loc.longitude\n    }));\n    \n    // 添加第一个点作为结束点，形成闭环\n    points.push(points[0]);\n    \n    polyline.value = [{\n        points: points,\n        color: '#1E90FF77', // 半透明蓝色\n        width: 2,\n        dottedLine: false,\n        arrowLine: false\n    }];\n};\n\n// ========== 标记点击和信息卡片功能 ==========\n/**\n * 处理标记点击事件\n */\nconst onMarkerTap = (e) => {\n    console.log('Marker tapped:', e);\n    const markerId = e.detail.markerId;\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    // 查找被点击的位置信息\n    const location = birdLocations.value.find(loc => loc.id === markerId);\n    \n    if (location) {\n        // 设置选中的位置信息\n        selectedLocation.value = location;\n        // 显示信息卡片\n        showInfoCard.value = true;\n        \n        console.log('显示地点信息:', location.name);\n    } else {\n        console.log('未找到匹配的地点信息, ID:', markerId);\n        uni.showToast({\n            title: '未找到该地点信息',\n            icon: 'none'\n        });\n    }\n};\n\n/**\n * 关闭信息卡片\n */\nconst closeInfoCard = () => {\n    showInfoCard.value = false;\n    selectedLocation.value = {};\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'light'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n};\n\n// ========== 操作按钮功能 ==========\n/**\n * 查看地点详情\n */\nconst viewDetails = () => {\n    // TODO: 跳转到地点详情页面\n    console.log('查看详情:', selectedLocation.value.name);\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    // 示例跳转（需要根据实际路由配置调整）\n    uni.navigateTo({\n        url: `/pages/LocationDetail/LocationDetail?id=${selectedLocation.value.id}`,\n        fail: (error) => {\n            console.error('跳转失败:', error);\n            uni.showToast({\n                title: '功能开发中',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n/**\n * 导航到地点\n */\nconst navigateToLocation = () => {\n    const location = selectedLocation.value;\n    console.log('导航到:', location.name);\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'heavy'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    // 打开系统地图应用进行导航\n    uni.openLocation({\n        latitude: location.latitude,\n        longitude: location.longitude,\n        name: location.name,\n        address: location.description,\n        success: () => {\n            console.log('成功打开地图导航');\n        },\n        fail: (error) => {\n            console.error('打开地图失败:', error);\n            uni.showToast({\n                title: '无法打开导航',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n/**\n * 分享地点\n */\nconst shareLocation = () => {\n    const location = selectedLocation.value;\n    console.log('分享地点:', location.name);\n    \n    // 添加触觉反馈\n    try {\n        uni.vibrateShort({\n            type: 'medium'\n        });\n    } catch (error) {\n        console.warn('触觉反馈不支持:', error);\n    }\n    \n    // TODO: 实现分享功能\n    uni.share({\n        provider: 'weixin',\n        scene: 'WXSceneSession',\n        type: 0,\n        href: `https://yourapp.com/location/${location.id}`,\n        title: `${location.name} - 观鸟地点推荐`,\n        summary: location.description,\n        imageUrl: getOSSUrl(location.image, 'medium'),\n        success: () => {\n            uni.showToast({\n                title: '分享成功',\n                icon: 'success'\n            });\n            closeInfoCard();\n        },\n        fail: (error) => {\n            console.error('分享失败:', error);\n            uni.showToast({\n                title: '分享失败',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n// ========== 错误处理 ==========\n/**\n * 图标加载失败处理\n */\nconst onIconError = (error) => {\n    console.warn('图标加载失败:', error);\n    // 隐藏失败的图标\n    if (error.target) {\n        error.target.style.display = 'none';\n    }\n};\n\n/**\n * 图片加载失败处理\n */\nconst onImageError = (error) => {\n    console.warn('地点图片加载失败:', error);\n    // 设置默认占位图\n    if (error.target) {\n        const defaultImageUrl = getOSSUrl('static/images/location-placeholder.jpg', 'large');\n        error.target.src = defaultImageUrl;\n    }\n};\n\n// ========== 生命周期 ==========\nonMounted(() => {\n    console.log('地图页面已加载');\n    getCurrentLocation();\n    \n    // 2秒后显示图例\n    setTimeout(() => {\n        showLegend.value = true;\n        setTimeout(() => {\n            showLegend.value = false;\n        }, 5000);\n    }, 2000);\n});\n</script>\n\n<style>\n.container {\n    position: relative;\n    height: 100vh;\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n}\n\n/* 搜索栏样式 */\n.search-container {\n    position: fixed;\n    top: var(--status-bar-height, 44px);\n    left: 0;\n    right: 0;\n    z-index: 100;\n    padding: 20rpx;\n}\n\n.search-box {\n    display: flex;\n    align-items: center;\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 50rpx;\n    padding: 16rpx 30rpx;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n    backdrop-filter: blur(10px);\n    transition: all 0.3s ease;\n}\n\n.search-box:focus-within {\n    box-shadow: 0 8rpx 30rpx rgba(59, 130, 246, 0.2);\n    transform: translateY(-2rpx);\n}\n\n.icon-search {\n    margin-right: 16rpx;\n    font-size: 32rpx;\n    color: #64748b;\n}\n\n.search-input {\n    flex: 1;\n    font-size: 28rpx;\n    color: #1e293b;\n    background: transparent;\n    border: none;\n    outline: none;\n}\n\n.search-btn {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    padding: 12rpx 20rpx;\n    border-radius: 30rpx;\n    margin-left: 10rpx;\n    transition: all 0.3s ease;\n}\n\n.search-btn:active {\n    transform: scale(0.95);\n}\n\n.search-btn-text {\n    font-size: 24rpx;\n    color: white;\n}\n\n/* 地图容器 */\n.map-container {\n    position: relative;\n    height: 100%;\n    width: 100%;\n}\n\n.map {\n    width: 100%;\n    height: 100%;\n}\n\n/* 控制按钮 */\n.control-buttons {\n    position: fixed;\n    right: 30rpx;\n    bottom: 200rpx;\n    z-index: 100;\n    display: flex;\n    flex-direction: column;\n    gap: 15rpx;\n}\n\n.control-btn {\n    background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);\n    width: 80rpx;\n    height: 80rpx;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    backdrop-filter: blur(10px);\n}\n\n.control-btn:active {\n    transform: scale(0.9);\n    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);\n}\n\n.control-btn:hover {\n    transform: translateY(-4rpx);\n    box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n}\n\n.icon-location {\n    font-size: 40rpx;\n}\n\n.zoom-icon {\n    font-size: 48rpx;\n    font-weight: bold;\n    color: #374151;\n}\n\n.layer-icon {\n    font-size: 36rpx;\n}\n\n/* 加载覆盖层 */\n.loading-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 200;\n    backdrop-filter: blur(5px);\n}\n\n.loading-content {\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    padding: 40rpx;\n    border-radius: 20rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.loading-spinner {\n    width: 60rpx;\n    height: 60rpx;\n    border: 4rpx solid #e2e8f0;\n    border-top: 4rpx solid #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 20rpx;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n    color: #374151;\n    font-size: 28rpx;\n}\n\n/* 地图图例 */\n.map-legend {\n    position: fixed;\n    top: 200rpx;\n    left: 30rpx;\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n    z-index: 90;\n    backdrop-filter: blur(10px);\n    max-width: 300rpx;\n}\n\n.legend-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 15rpx;\n}\n\n.legend-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #1e293b;\n}\n\n.legend-close {\n    font-size: 36rpx;\n    color: #64748b;\n    cursor: pointer;\n    padding: 5rpx;\n}\n\n.legend-items {\n    display: flex;\n    flex-direction: column;\n    gap: 10rpx;\n}\n\n.legend-item {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n}\n\n.legend-icon {\n    width: 32rpx;\n    height: 32rpx;\n}\n\n.legend-text {\n    font-size: 24rpx;\n    color: #475569;\n}\n\n/* 信息卡片样式 */\n.info-card {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 150;\n    padding: 30rpx;\n    padding-bottom: calc(30rpx + env(safe-area-inset-bottom));\n}\n\n.info-card-inner {\n    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n    border-radius: 24rpx;\n    overflow: hidden;\n    box-shadow: 0 8rpx 40rpx rgba(0, 0, 0, 0.15);\n    position: relative;\n    max-height: 80vh;\n    overflow-y: auto;\n    backdrop-filter: blur(20px);\n}\n\n.info-card-header {\n    position: relative;\n}\n\n.info-card-close {\n    position: absolute;\n    top: 20rpx;\n    right: 20rpx;\n    width: 60rpx;\n    height: 60rpx;\n    background: rgba(0, 0, 0, 0.6);\n    color: #ffffff;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 36rpx;\n    z-index: 10;\n    transition: all 0.3s ease;\n}\n\n.info-card-close:active {\n    transform: scale(0.9);\n    background: rgba(0, 0, 0, 0.8);\n}\n\n.info-card-image {\n    width: 100%;\n    height: 320rpx;\n    object-fit: cover;\n}\n\n.info-card-badge {\n    position: absolute;\n    bottom: 20rpx;\n    left: 20rpx;\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    padding: 8rpx 16rpx;\n    border-radius: 20rpx;\n    font-size: 24rpx;\n    backdrop-filter: blur(10px);\n}\n\n.info-card-content {\n    padding: 30rpx;\n}\n\n.info-card-title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #1e293b;\n    margin-bottom: 15rpx;\n}\n\n.info-card-description {\n    font-size: 28rpx;\n    color: #475569;\n    line-height: 1.6;\n    margin-bottom: 30rpx;\n}\n\n/* 鸟类统计样式 */\n.bird-stats {\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n    border-radius: 16rpx;\n    padding: 25rpx;\n    margin-bottom: 25rpx;\n    border: 1rpx solid rgba(59, 130, 246, 0.1);\n}\n\n.stats-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 20rpx;\n}\n\n.stats-row {\n    display: flex;\n    justify-content: space-between;\n}\n\n.stat-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    flex: 1;\n}\n\n.stat-value {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: #3b82f6;\n}\n\n.stat-label {\n    font-size: 24rpx;\n    color: #64748b;\n    margin-top: 8rpx;\n}\n\n/* 最佳时间 */\n.best-time {\n    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    margin-bottom: 25rpx;\n    border: 1rpx solid rgba(245, 158, 11, 0.2);\n}\n\n.time-title {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #92400e;\n    margin-bottom: 10rpx;\n}\n\n.time-content {\n    font-size: 24rpx;\n    color: #a16207;\n    line-height: 1.5;\n}\n\n/* 常见鸟类 */\n.common-birds {\n    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n    border-radius: 16rpx;\n    padding: 20rpx;\n    margin-bottom: 30rpx;\n    border: 1rpx solid rgba(34, 197, 94, 0.1);\n}\n\n.birds-title {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #166534;\n    margin-bottom: 15rpx;\n}\n\n.birds-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10rpx;\n}\n\n.bird-tag {\n    background: rgba(34, 197, 94, 0.1);\n    color: #166534;\n    padding: 8rpx 16rpx;\n    border-radius: 20rpx;\n    font-size: 22rpx;\n    border: 1rpx solid rgba(34, 197, 94, 0.2);\n}\n\n/* 操作按钮 */\n.action-buttons {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 15rpx;\n}\n\n.action-btn {\n    height: 80rpx;\n    border-radius: 40rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 24rpx;\n    border: none;\n    transition: all 0.3s ease;\n    gap: 5rpx;\n}\n\n.action-btn:active {\n    transform: scale(0.95);\n}\n\n.btn-icon {\n    font-size: 28rpx;\n}\n\n.details-btn {\n    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);\n    color: #374151;\n}\n\n.details-btn:hover {\n    background: linear-gradient(135deg, #e2e8f0, #cbd5e1);\n}\n\n.navigate-btn {\n    background: linear-gradient(135deg, #22c55e, #16a34a);\n    color: #ffffff;\n}\n\n.navigate-btn:hover {\n    background: linear-gradient(135deg, #16a34a, #15803d);\n}\n\n.share-btn {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: #ffffff;\n}\n\n.share-btn:hover {\n    background: linear-gradient(135deg, #1d4ed8, #1e40af);\n}\n\n/* 响应式设计 */\n@media screen and (max-width: 750rpx) {\n    .search-container {\n        padding: 15rpx;\n    }\n    \n    .control-buttons {\n        right: 20rpx;\n        bottom: 180rpx;\n    }\n    \n    .control-btn {\n        width: 70rpx;\n        height: 70rpx;\n    }\n    \n    .info-card {\n        padding: 20rpx;\n    }\n    \n    .info-card-content {\n        padding: 25rpx;\n    }\n    \n    .action-buttons {\n        grid-template-columns: 1fr;\n        gap: 10rpx;\n    }\n    \n    .action-btn {\n        flex-direction: row;\n        justify-content: center;\n        gap: 10rpx;\n    }\n    \n    .map-legend {\n        left: 20rpx;\n        top: 180rpx;\n        max-width: 250rpx;\n    }\n}\n\n/* 暗色模式适配 */\n@media (prefers-color-scheme: dark) {\n    .container {\n        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);\n    }\n    \n    .search-box {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .search-input {\n        color: #f1f5f9;\n    }\n    \n    .control-btn {\n        background: linear-gradient(135deg, #334155 0%, #475569 100%);\n    }\n    \n    .loading-content {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .loading-text {\n        color: #f1f5f9;\n    }\n    \n    .map-legend {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .legend-title {\n        color: #f1f5f9;\n    }\n    \n    .legend-text {\n        color: #cbd5e1;\n    }\n    \n    .info-card-inner {\n        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n    }\n    \n    .info-card-title {\n        color: #f1f5f9;\n    }\n    \n    .info-card-description {\n        color: #cbd5e1;\n    }\n}\n\n/* 动画效果 */\n@keyframes slideUp {\n    from {\n        transform: translateY(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n.info-card {\n    animation: slideUp 0.3s ease-out;\n}\n\n/* 性能优化 */\n.control-btn, .action-btn, .search-box, .info-card-inner {\n    will-change: transform, box-shadow;\n}\n\n/* 防止文本选中 */\n.info-card-title, .stats-title, .legend-title {\n    user-select: none;\n    -webkit-user-select: none;\n}\n</style>","import MiniProgramPage from 'D:/sitp项目/miniprogram/bird-frontend/pages/MapPage/MapPage.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}